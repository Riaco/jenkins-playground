2020-06-27_09:47:19.55436 == Sinatra (v2.0.8.1) has taken the stage on 9168 for development with backup from Puma
2020-06-27_09:47:19.55493 Puma starting in single mode...
2020-06-27_09:47:19.55544 * Version 4.3.3.gitlab.2 (ruby 2.6.6-p146), codename: Mysterious Traveller
2020-06-27_09:47:19.55609 * Min threads: 0, max threads: 16
2020-06-27_09:47:19.55657 * Environment: development
2020-06-27_09:47:19.55700 * Listening on tcp://127.0.0.1:9168
2020-06-27_09:47:19.55740 Use Ctrl-C to stop
2020-06-27_12:40:43.69111 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:40:43.69320 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:40:58.53728 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:40:58.53906 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:41:13.71054 2020-06-27 12:41:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2678": Too many open files
2020-06-27_12:41:13.71790 :
2020-06-27_12:41:13.71952 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:41:13.72074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:41:13.72400 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:41:13.72580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:41:13.72662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:41:13.74169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:41:13.74406 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:41:13.74505 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:41:13.74630 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:41:13.74769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:41:13.74901 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:41:13.75015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:41:13.75114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:41:13.75196 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:41:13.75328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:41:13.75527 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:41:13.75701 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:41:13.75823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:41:13.76006 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:41:13.76179 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:41:13.76355 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:41:13.76483 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:41:13.76584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:41:13.76725 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:41:13.76814 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:41:13.77002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:41:13.77121 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:41:13.77204 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:41:13.77736 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:41:13.77952 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:41:13.78277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:41:13.78424 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:13.78521 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:13.78690 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:13.79081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:41:13.79196 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:41:13.79341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:13.79547 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:13.79661 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:13.80559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:41:13.80673 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:41:13.80824 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:41:13.81102 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:41:13.81215 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:41:13.81403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:41:13.81595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:13.81740 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:13.81850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:41:13.81921 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:41:13.82078 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:41:13.82225 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:41:13.82422 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:41:13.82558 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:41:13.82622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:41:13.82783 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:41:13.82965 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:41:13.84655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:41:13.84739 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:41:13.84985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:41:13.85115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:41:13.85553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:41:28.36676 2020-06-27 12:41:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:41:28.36824 :
2020-06-27_12:41:28.37632 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:41:28.37815 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:41:28.37897 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:41:28.37995 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:41:28.38131 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:41:28.38226 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:41:28.38328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:41:28.38405 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:41:28.38487 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:41:28.38609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:41:28.38680 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:41:28.38787 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:41:28.38874 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:41:28.38973 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:41:28.39050 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:41:28.39130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:41:28.39208 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:41:28.39271 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:41:28.39341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:41:28.39410 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:41:28.39549 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:41:28.39638 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:41:28.39734 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:41:28.39855 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:41:28.40010 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:41:28.40145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:41:28.40234 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:41:28.40350 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:41:28.40437 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:41:28.40520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:41:28.40581 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:41:28.40695 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:28.40777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:28.40866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:28.40983 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:41:28.41081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:41:28.41164 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:28.41237 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:28.41322 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:28.41401 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:41:28.41477 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:41:28.41734 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:41:28.41818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:41:28.41880 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:41:28.41983 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:41:28.42064 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:28.42147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:28.42232 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:41:28.42313 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:41:28.42368 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:41:28.42421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:41:28.42516 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:41:28.42591 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:41:28.42674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:41:28.42777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:41:28.42882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:41:28.42993 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:41:28.43208 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:41:28.43429 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:41:28.43652 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:41:28.43749 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:41:43.69400 2020-06-27 12:41:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2663": Too many open files
2020-06-27_12:41:43.69598 :
2020-06-27_12:41:43.69746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:41:43.70572 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:41:43.70684 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:41:43.70767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:41:43.70897 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:41:43.70971 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:41:43.71068 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:41:43.71223 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:41:43.71334 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:41:43.71380 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:41:43.71489 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:41:43.71578 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:41:43.71835 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:41:43.72069 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:41:43.72189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:41:43.72269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:41:43.72429 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:41:43.72535 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:41:43.72645 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:41:43.72737 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:41:43.72921 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:41:43.73015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:41:43.73126 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:41:43.73255 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:41:43.73375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:41:43.73509 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:41:43.73712 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:41:43.73811 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:41:43.74454 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:41:43.74547 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:41:43.74646 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:41:43.74733 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:43.74883 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:43.74955 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:43.75043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:41:43.75149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:41:43.75232 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:43.75336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:43.75422 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:43.75530 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:41:43.75668 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:41:43.75787 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:41:43.75894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:41:43.76456 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:41:43.76694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:41:43.77035 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:43.77112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:43.77446 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:41:43.77711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:41:43.77921 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:41:43.78081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:41:43.78370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:41:43.78671 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:41:43.78961 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:41:43.79301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:41:43.79546 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:41:43.79638 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:41:43.79765 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:41:43.79925 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:41:43.80273 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:41:43.80374 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:41:58.68860 2020-06-27 12:41:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:41:58.68987 :
2020-06-27_12:41:58.69087 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:41:58.69192 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:41:58.69335 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:41:58.69390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:41:58.69461 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:41:58.69541 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:41:58.69624 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:41:58.69870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:41:58.69971 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:41:58.71808 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:41:58.72225 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:41:58.72468 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:41:58.72880 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:41:58.73464 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:41:58.74082 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:41:58.74193 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:41:58.74361 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:41:58.74443 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:41:58.74511 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:41:58.74633 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:41:58.74763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:41:58.74832 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:41:58.74982 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:41:58.75134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:41:58.75258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:41:58.75316 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:41:58.75408 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:41:58.75492 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:41:58.75586 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:41:58.75744 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:41:58.75867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:41:58.75934 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:58.76003 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:58.76175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:58.76269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:41:58.76409 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:41:58.76703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:41:58.76855 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:41:58.76943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:41:58.77008 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:41:58.77145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:41:58.77253 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:41:58.77344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:41:58.77426 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:41:58.77490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:41:58.77563 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:58.77648 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:41:58.77722 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:41:58.77810 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:41:58.77923 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:41:58.78003 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:41:58.78120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:41:58.78186 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:41:58.78298 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:41:58.78395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:41:58.78499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:41:58.78539 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:41:58.78595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:41:58.78673 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:41:58.78738 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:41:58.78897 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:42:13.56299 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:42:13.56482 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:42:28.86509 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.87886 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.89215 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.92609 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.94168 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.95422 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.96972 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.98437 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:28.99927 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.07089 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.08471 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.09800 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.12779 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.19843 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.21172 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.22422 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.23772 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.29644 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.34040 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.35397 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.36873 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.44311 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.45746 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.47184 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.50750 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.54988 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.60218 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.62556 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.63796 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.67740 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.69722 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.78737 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.83293 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.84613 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:29.94800 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:30.08557 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:30.09883 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:30.11175 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:30.12519 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:30.14031 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:30.15332 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:42:58.47593 2020-06-27 12:42:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2684": Too many open files
2020-06-27_12:42:58.47680 :
2020-06-27_12:42:58.47751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:42:58.47865 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:42:58.47970 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:42:58.48038 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:42:58.48106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:42:58.48205 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:42:58.48303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:42:58.48395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:42:58.48473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:42:58.48562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:42:58.48652 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:42:58.48740 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:42:58.48800 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:42:58.49044 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:42:58.49217 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:42:58.49832 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:42:58.51316 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:42:58.51407 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:42:58.51477 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:42:58.51585 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:42:58.51687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:42:58.51754 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:42:58.51832 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:42:58.51888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:42:58.51938 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:42:58.52002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:42:58.52060 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:42:58.52138 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:42:58.52762 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:42:58.52987 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:42:58.53452 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:42:58.53543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:42:58.53630 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:42:58.53723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:42:58.53807 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:42:58.53948 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:42:58.54046 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:42:58.54138 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:42:58.54237 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:42:58.54323 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:42:58.54389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:42:58.54531 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:42:58.54613 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:42:58.54688 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:42:58.54792 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:42:58.54919 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:42:58.55006 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:42:58.55092 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:42:58.55223 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:42:58.55311 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:42:58.55381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:42:58.55495 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:42:58.55593 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:42:58.55703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:42:58.55822 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:42:58.55960 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:42:58.56012 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:42:58.56092 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:42:58.56176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:42:58.56269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:42:58.56346 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:43:13.41917 2020-06-27 12:43:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:43:13.42019 :
2020-06-27_12:43:13.42107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:43:13.42180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:43:13.42314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:43:13.42520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:43:13.42589 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:43:13.42667 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:43:13.42747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:43:13.42817 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:43:13.42876 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:43:13.42947 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:43:13.43033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:43:13.43111 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:43:13.43207 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:43:13.43302 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:43:13.43354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:43:13.43551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:43:13.43633 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:43:13.43704 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:43:13.43790 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:43:13.43863 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:43:13.43929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:43:13.44002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:43:13.44070 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:43:13.44142 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:43:13.44213 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:43:13.44276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:43:13.44372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:43:13.44439 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:43:13.44487 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:43:13.44552 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:43:13.44612 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:43:13.44669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:43:13.44721 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:43:13.44786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:43:13.44875 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:43:13.44936 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:43:13.45007 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:43:13.45081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:43:13.45169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:43:13.45229 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:43:13.45286 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:43:13.45362 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:43:13.45425 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:43:13.45501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:43:13.45636 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:43:13.45731 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:43:13.45860 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:43:13.45938 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:43:13.46002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:43:13.46077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:43:13.46140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:43:13.46194 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:43:13.46245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:43:13.46331 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:43:13.46417 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:43:13.46471 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:43:13.46540 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:43:13.46597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:43:13.46668 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:43:13.46742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:43:13.46813 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:43:28.60674 2020-06-27 12:43:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:43:28.61030 :
2020-06-27_12:43:28.61404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:43:28.61706 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:43:28.61825 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:43:28.62046 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:43:28.62127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:43:28.62199 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:43:28.62285 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:43:28.62646 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:43:28.62772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:43:28.62906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:43:28.63037 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:43:28.63175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:43:28.63260 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:43:28.63355 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:43:28.63490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:43:28.63600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:43:28.63723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:43:28.64156 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:43:28.64334 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:43:28.64490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:43:28.64709 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:43:28.65139 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:43:28.65316 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:43:28.65413 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:43:28.65483 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:43:28.65592 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:43:28.65748 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:43:28.65898 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:43:28.66027 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:43:28.66206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:43:28.66323 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:43:28.66411 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:43:28.66519 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:43:28.66647 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:43:28.66756 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:43:28.66904 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:43:28.66997 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:43:28.67086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:43:28.67358 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:43:28.67479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:43:28.67725 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:43:28.67847 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:43:28.67946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:43:28.68186 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:43:28.68287 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:43:28.68387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:43:28.68665 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:43:28.69116 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:43:28.69217 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:43:28.69327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:43:28.69483 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:43:28.69594 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:43:28.69698 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:43:28.69775 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:43:28.69868 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:43:28.70009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:43:28.70262 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:43:28.70393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:43:28.70468 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:43:28.70537 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:43:28.70661 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:43:43.42147 2020-06-27 12:43:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:43:43.43418 :
2020-06-27_12:43:43.43544 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:43:43.43623 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:43:43.43707 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:43:43.43802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:43:43.43902 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:43:43.43981 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:43:43.44109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:43:43.44237 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:43:43.44337 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:43:43.44424 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:43:43.44500 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:43:43.44589 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:43:43.44663 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:43:43.44746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:43:43.44811 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:43:43.44883 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:43:43.44986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:43:43.45153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:43:43.45845 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:43:43.45930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:43:43.46050 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:43:43.46158 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:43:43.46213 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:43:43.46284 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:43:43.46363 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:43:43.46427 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:43:43.46485 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:43:43.46549 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:43:43.46771 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:43:43.46823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:43:43.46894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:43:43.46964 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:43:43.47030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:43:43.47098 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:43:43.47167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:43:43.47235 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:43:43.47354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:43:43.47469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:43:43.47558 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:43:43.47610 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:43:43.47948 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:43:43.48020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:43:43.48160 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:43:43.48260 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:43:43.48353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:43:43.48468 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:43:43.48568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:43:43.48678 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:43:43.48747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:43:43.48828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:43:43.48929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:43:43.49006 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:43:43.49078 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:43:43.49216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:43:43.49381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:43:43.49573 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:43:43.49676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:43:43.49761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:43:43.49848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:43:43.49932 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:43:43.50020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:43:58.65658 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:43:58.66724 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:43:58.67940 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:43:58.69065 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:44:13.73836 2020-06-27 12:44:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2610": Too many open files
2020-06-27_12:44:13.73920 :
2020-06-27_12:44:13.74076 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:44:13.74170 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:44:13.74328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:44:13.74466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:44:13.74557 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:44:13.74615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:44:13.74859 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:44:13.74936 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:44:13.75063 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:44:13.75303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:44:13.75523 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:44:13.75633 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:44:13.75850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:44:13.76032 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:44:13.76180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:44:13.76267 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:44:13.76368 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:44:13.76505 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:44:13.76600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:44:13.76702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:44:13.76798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:44:13.77043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:44:13.77160 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:44:13.77249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:44:13.77366 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:44:13.77481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:44:13.77635 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:44:13.77711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:44:13.77797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:44:13.77866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:44:13.77960 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:44:13.78069 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:44:13.78165 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:44:13.78258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:44:13.78334 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:44:13.78410 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:44:13.78514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:44:13.78588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:44:13.78682 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:44:13.78773 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:44:13.78854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:44:13.78945 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:44:13.79049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:44:13.79171 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:44:13.79535 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:44:13.79595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:44:13.79818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:44:13.79894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:44:13.79978 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:44:13.80073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:44:13.80150 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:44:13.80294 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:44:13.80370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:44:13.80443 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:44:13.80647 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:44:13.80749 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:44:13.80858 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:44:13.80953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:44:13.81056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:44:13.81158 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:44:13.81276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:44:28.64026 2020-06-27 12:44:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:44:28.64183 :
2020-06-27_12:44:28.64298 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:44:28.64371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:44:28.64492 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:44:28.64580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:44:28.64677 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:44:28.64766 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:44:28.64953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:44:28.65019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:44:28.65107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:44:28.65188 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:44:28.65274 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:44:28.65364 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:44:28.65443 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:44:28.65530 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:44:28.65700 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:44:28.65785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:44:28.65882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:44:28.65974 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:44:28.66327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:44:28.66403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:44:28.66504 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:44:28.66617 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:44:28.66739 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:44:28.66929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:44:28.67001 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:44:28.67239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:44:28.67309 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:44:28.67380 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:44:28.67451 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:44:28.67520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:44:28.67593 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:44:28.67736 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:44:28.67813 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:44:28.67898 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:44:28.67986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:44:28.68062 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:44:28.68195 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:44:28.68360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:44:28.68448 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:44:28.68538 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:44:28.68651 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:44:28.68732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:44:28.68934 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:44:28.69008 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:44:28.69077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:44:28.69144 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:44:28.69250 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:44:28.69349 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:44:28.69545 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:44:28.69609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:44:28.69693 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:44:28.69760 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:44:28.69869 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:44:28.70056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:44:28.70359 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:44:28.71014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:44:28.71138 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:44:28.71389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:44:28.71728 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:44:28.71799 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:44:28.71881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:44:43.56736 2020-06-27 12:44:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2663": Too many open files
2020-06-27_12:44:43.56878 :
2020-06-27_12:44:43.57073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:44:43.57147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:44:43.57239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:44:43.57322 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:44:43.57393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:44:43.57475 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:44:43.57596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:44:43.57725 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:44:43.57804 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:44:43.57885 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:44:43.57987 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:44:43.58078 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:44:43.58161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:44:43.58233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:44:43.58321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:44:43.58388 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:44:43.58454 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:44:43.58533 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:44:43.58615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:44:43.58684 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:44:43.58776 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:44:43.58838 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:44:43.58892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:44:43.58966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:44:43.59056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:44:43.59167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:44:43.59254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:44:43.59327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:44:43.59631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:44:43.59727 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:44:43.59826 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:44:43.59947 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:44:43.60047 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:44:43.60153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:44:43.60229 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:44:43.60324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:44:43.60446 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:44:43.60624 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:44:43.60801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:44:43.60923 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:44:43.61024 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:44:43.61098 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:44:43.61203 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:44:43.61301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:44:43.61379 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:44:43.61453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:44:43.61535 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:44:43.61625 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:44:43.61707 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:44:43.61774 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:44:43.61842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:44:43.61918 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:44:43.61995 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:44:43.62067 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:44:43.62237 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:44:43.62404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:44:43.62514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:44:43.62747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:44:43.63260 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:44:43.63343 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:44:43.63607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:48:14.08867 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.10510 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.42723 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.53453 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.54562 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.61649 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.64437 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.65778 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.67006 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.68239 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.74276 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.84336 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.95128 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:14.98771 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.06786 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.10837 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.14829 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.22077 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.23476 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.25957 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.31561 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.34580 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.41658 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.44947 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.46277 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.47643 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.48957 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.50304 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.51694 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.61107 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.69823 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.71179 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.77961 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.80041 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:15.81530 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:16.01978 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:48:16.04173 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:49:43.51712 2020-06-27 12:49:43 - PG::InsufficientResources - ERROR:  could not read block 1 in file "base/16385/2684": Too many open files
2020-06-27_12:49:43.52001 :
2020-06-27_12:49:43.52244 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:49:43.52340 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:49:43.52447 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:49:43.52588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:49:43.52675 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:49:43.52769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:49:43.52899 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:49:43.53055 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:49:43.53272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:49:43.53539 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:49:43.53756 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:49:43.53992 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:49:43.54233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:49:43.54591 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:49:43.55227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:49:43.55490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:49:43.55639 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:49:43.55703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:49:43.55781 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:49:43.55847 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:49:43.55912 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:49:43.55986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:49:43.56102 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:49:43.56172 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:49:43.56304 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:49:43.56380 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:49:43.56455 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:49:43.56514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:49:43.56564 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:49:43.56635 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:49:43.56709 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:49:43.56791 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:49:43.56850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:49:43.56918 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:49:43.56991 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:49:43.57054 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:49:43.57134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:49:43.57199 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:49:43.57250 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:49:43.57314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:49:43.57402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:49:43.57482 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:49:43.57544 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:49:43.57662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:49:43.57759 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:49:43.57926 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:49:43.58047 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:49:43.58760 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:49:43.58851 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:49:43.58915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:49:43.59271 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:49:43.59451 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:49:43.60401 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:49:43.61085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:49:43.61390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:49:43.61889 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:49:43.62284 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:49:43.62795 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:49:43.63278 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:49:43.63454 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:49:43.63843 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:49:58.71126 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:50:28.58480 2020-06-27 12:50:28 - PG::InsufficientResources - ERROR:  could not read block 1 in file "base/16385/1259": Too many open files
2020-06-27_12:50:28.59565 :
2020-06-27_12:50:28.59655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:50:28.59723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:50:28.59777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:50:28.59830 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:50:28.59950 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:50:28.60023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:50:28.60094 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:50:28.60194 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:50:28.60344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:50:28.60455 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:50:28.60542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:50:28.60612 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:50:28.60729 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:50:28.60819 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:50:28.60892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:50:28.60980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:50:28.61061 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:50:28.61198 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:50:28.61287 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:50:28.61376 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:50:28.61553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:50:28.61649 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:50:28.62127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:50:28.62201 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:50:28.62269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:50:28.62341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:50:28.62399 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:50:28.62480 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:50:28.62551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:50:28.62637 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:50:28.62713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:50:28.62780 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:50:28.62854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:50:28.62946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:50:28.63025 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:50:28.63082 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:50:28.63145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:50:28.63284 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:50:28.63352 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:50:28.63466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:50:28.63572 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:50:28.63641 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:50:28.63720 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:50:28.63800 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:50:28.63969 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:50:28.64021 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:50:28.64088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:50:28.64154 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:50:28.64216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:50:28.64289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:50:28.64446 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:50:28.64523 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:50:28.64694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:50:28.64768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:50:28.64839 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:50:28.64927 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:50:28.64994 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:50:28.65082 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:50:28.65176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:50:28.65248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:50:28.65373 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:50:43.64939 2020-06-27 12:50:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2684": Too many open files
2020-06-27_12:50:43.64987 :
2020-06-27_12:50:43.65074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:50:43.65230 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:50:43.65344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:50:43.65488 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:50:43.65953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:50:43.66069 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:50:43.66165 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:50:43.66254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:50:43.66384 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:50:43.66490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:50:43.66575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:50:43.66674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:50:43.66805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:50:43.67003 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:50:43.67224 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:50:43.67313 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:50:43.67470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:50:43.67733 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:50:43.67791 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:50:43.67893 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:50:43.67981 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:50:43.68061 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:50:43.68176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:50:43.68277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:50:43.68371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:50:43.68427 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:50:43.68519 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:50:43.68615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:50:43.68709 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:50:43.68802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:50:43.68888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:50:43.69009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:50:43.69130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:50:43.69207 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:50:43.69272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:50:43.69341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:50:43.69421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:50:43.69499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:50:43.69616 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:50:43.69692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:50:43.69827 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:50:43.69911 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:50:43.70003 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:50:43.70073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:50:43.70158 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:50:43.70296 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:50:43.70380 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:50:43.70465 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:50:43.70543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:50:43.70643 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:50:43.70743 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:50:43.70842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:50:43.70904 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:50:43.71003 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:50:43.71154 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:50:43.71233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:50:43.71323 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:50:43.71416 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:50:43.71510 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:50:43.71611 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:50:43.71692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:50:58.68832 2020-06-27 12:50:58 - PG::InsufficientResources - ERROR:  could not read block 0 in file "base/16385/2615_vm": Too many open files
2020-06-27_12:50:58.68980 :
2020-06-27_12:50:58.69077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:50:58.69166 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:50:58.69263 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:50:58.69353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:50:58.69501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:50:58.69581 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:50:58.69721 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:50:58.69828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:50:58.69938 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:50:58.70073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:50:58.70281 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:50:58.70511 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:50:58.70708 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:50:58.70801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:50:58.71088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:50:58.71172 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:50:58.72272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:50:58.72545 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:50:58.72704 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:50:58.72783 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:50:58.72881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:50:58.72958 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:50:58.73049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:50:58.73123 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:50:58.73179 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:50:58.73249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:50:58.73314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:50:58.73382 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:50:58.73447 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:50:58.73540 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:50:58.73625 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:50:58.73723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:50:58.73821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:50:58.73925 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:50:58.73996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:50:58.74354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:50:58.74460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:50:58.74567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:50:58.74742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:50:58.74887 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:50:58.74971 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:50:58.75081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:50:58.75236 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:50:58.75324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:50:58.75530 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:50:58.75740 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:50:58.75870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:50:58.76065 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:50:58.76202 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:50:58.76283 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:50:58.76398 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:50:58.76524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:50:58.76704 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:50:58.76821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:50:58.76909 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:50:58.77045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:50:58.77161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:50:58.77314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:50:58.77446 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:50:58.77562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:50:58.77631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:51:13.45656 2020-06-27 12:51:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:51:13.46517 :
2020-06-27_12:51:13.46885 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:51:13.47002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:51:13.47082 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:51:13.47157 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:51:13.47238 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:51:13.47319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:51:13.47425 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:51:13.47625 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:51:13.47699 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:51:13.47790 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:51:13.47868 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:51:13.47945 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:51:13.48015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:51:13.48088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:51:13.48157 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:51:13.48226 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:51:13.48278 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:51:13.48359 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:51:13.48424 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:51:13.48518 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:51:13.48588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:51:13.48669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:51:13.48731 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:51:13.48801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:51:13.48878 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:51:13.48936 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:51:13.49024 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:51:13.49090 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:51:13.49160 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:51:13.49227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:51:13.49295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:51:13.49370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:51:13.49442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:51:13.49667 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:51:13.49883 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:51:13.49967 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:51:13.50049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:51:13.50145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:51:13.50243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:51:13.50353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:51:13.50441 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:51:13.50516 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:51:13.50569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:51:13.50667 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:51:13.50723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:51:13.50783 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:51:13.50854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:51:13.50917 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:51:13.50976 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:51:13.51048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:51:13.51114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:51:13.51178 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:51:13.51247 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:51:13.51334 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:51:13.51398 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:51:13.51523 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:51:13.51586 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:51:13.51654 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:51:13.51723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:51:13.51784 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:51:13.51846 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:51:58.74825 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:51:58.77988 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:52:28.63604 2020-06-27 12:52:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2615": Too many open files
2020-06-27_12:52:28.63985 :
2020-06-27_12:52:28.64407 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:52:28.64608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:52:28.64672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:52:28.64742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:52:28.64815 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:52:28.64873 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:52:28.64945 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:52:28.65028 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:52:28.65118 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:52:28.65189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:52:28.65325 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:52:28.65409 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:52:28.65481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:52:28.65655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:52:28.65737 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:52:28.65853 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:52:28.65943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:52:28.66030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:52:28.66103 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:52:28.66176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:52:28.66248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:52:28.66330 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:52:28.66386 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:52:28.66458 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:52:28.66540 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:52:28.66612 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:52:28.66692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:52:28.66769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:52:28.66870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:52:28.66951 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:52:28.67029 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:52:28.67116 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:52:28.67239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:52:28.67338 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:52:28.67436 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:52:28.67531 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:52:28.67660 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:52:28.67854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:52:28.68021 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:52:28.68109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:52:28.68195 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:52:28.68271 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:52:28.68360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:52:28.68455 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:52:28.68543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:52:28.68631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:52:28.68715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:52:28.68831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:52:28.68955 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:52:28.69060 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:52:28.69146 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:52:28.69233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:52:28.69377 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:52:28.69452 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:52:28.69538 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:52:28.69615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:52:28.69676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:52:28.69764 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:52:28.69842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:52:28.69903 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:52:28.69988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:52:43.73741 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:53:13.47594 2020-06-27 12:53:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2662": Too many open files
2020-06-27_12:53:13.47682 :
2020-06-27_12:53:13.47749 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:53:13.47834 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:53:13.47929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:53:13.48053 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:53:13.48120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:53:13.48267 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:53:13.48370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:53:13.48449 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:53:13.48600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:53:13.48676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:53:13.48794 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:53:13.48865 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:53:13.48951 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:53:13.49140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:53:13.49214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:53:13.49314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:53:13.49560 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:53:13.49799 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:53:13.49894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:53:13.50066 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:53:13.50195 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:53:13.50393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:53:13.50472 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:53:13.50542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:53:13.50606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:53:13.50691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:53:13.50767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:53:13.50840 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:53:13.50910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:53:13.50986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:53:13.51047 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:53:13.51143 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:53:13.51248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:53:13.51319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:53:13.51391 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:53:13.51458 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:53:13.51521 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:53:13.51606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:53:13.51707 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:53:13.51782 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:53:13.51848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:53:13.51902 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:53:13.52341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:53:13.52490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:53:13.52587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:53:13.52685 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:53:13.52795 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:53:13.52898 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:53:13.52994 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:53:13.53145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:53:13.53300 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:53:13.53451 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:53:13.53587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:53:13.53667 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:53:13.53750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:53:13.53830 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:53:13.53901 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:53:13.53959 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:53:13.54032 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:53:13.54136 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:53:13.54213 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:53:28.64156 2020-06-27 12:53:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:53:28.64235 :
2020-06-27_12:53:28.64350 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:53:28.64438 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:53:28.64645 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:53:28.64738 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:53:28.64812 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:53:28.64933 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:53:28.64999 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:53:28.65092 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:53:28.65177 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:53:28.65289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:53:28.65372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:53:28.65495 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:53:28.65576 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:53:28.65661 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:53:28.65757 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:53:28.65840 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:53:28.65900 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:53:28.65994 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:53:28.66065 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:53:28.66135 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:53:28.66195 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:53:28.66286 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:53:28.66350 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:53:28.66409 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:53:28.66509 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:53:28.66663 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:53:28.66784 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:53:28.66861 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:53:28.66948 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:53:28.67034 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:53:28.67097 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:53:28.67150 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:53:28.67235 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:53:28.67305 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:53:28.67390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:53:28.67461 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:53:28.67671 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:53:28.67763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:53:28.67816 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:53:28.67909 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:53:28.68061 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:53:28.68165 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:53:28.68252 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:53:28.68327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:53:28.68404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:53:28.68532 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:53:28.68609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:53:28.68710 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:53:28.68829 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:53:28.68914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:53:28.69032 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:53:28.69114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:53:28.69157 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:53:28.69220 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:53:28.69317 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:53:28.69412 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:53:28.69519 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:53:28.69605 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:53:28.69689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:53:28.69801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:53:28.69963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:54:13.65864 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:54:13.65980 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:54:28.91055 2020-06-27 12:54:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2662": Too many open files
2020-06-27_12:54:28.91251 :
2020-06-27_12:54:28.91389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:54:28.91553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:54:28.91681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:54:28.91874 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:54:28.92030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:54:28.92206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:54:28.92324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:54:28.92472 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:54:28.92831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:54:28.92943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:54:28.93128 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:54:28.93313 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:54:28.93479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:54:28.93567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:54:28.93864 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:54:28.94039 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:54:28.94169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:54:28.94296 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:54:28.94372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:54:28.94465 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:54:28.94560 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:54:28.94662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:54:28.94771 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:54:28.94854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:54:28.94995 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:54:28.95097 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:54:28.95607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:54:28.95684 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:54:28.95769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:54:28.95853 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:54:28.95930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:54:28.96033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:54:28.96128 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:54:28.96227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:54:28.96337 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:54:28.96460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:54:28.96567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:54:28.96953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:54:28.97064 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:54:28.97200 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:54:28.97478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:54:28.97591 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:54:28.97730 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:54:28.97851 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:54:28.97974 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:54:28.98162 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:54:28.98342 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:54:28.98516 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:54:28.98701 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:54:28.98867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:54:28.99019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:54:28.99148 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:54:28.99256 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:54:28.99346 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:54:28.99463 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:54:28.99575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:54:28.99668 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:54:28.99782 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:54:28.99959 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:54:29.00109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:54:29.00195 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:54:43.70545 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:54:43.71810 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:54:43.73087 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:54:43.74451 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:54:43.79849 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:54:43.90434 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:54:43.90749 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:55:13.50900 2020-06-27 12:55:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2615": Too many open files
2020-06-27_12:55:13.51792 :
2020-06-27_12:55:13.51988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:55:13.52086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:55:13.52173 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:55:13.52258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:55:13.52329 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:55:13.52418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:55:13.52495 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:55:13.52587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:55:13.52672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:55:13.52740 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:55:13.52830 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:55:13.52894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:55:13.52969 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:55:13.53099 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:55:13.53194 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:55:13.53262 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:55:13.53327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:55:13.53402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:55:13.53501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:55:13.53567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:55:13.53657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:55:13.53723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:55:13.53793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:55:13.53867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:55:13.53975 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:55:13.54037 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:55:13.54101 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:55:13.54176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:55:13.54257 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:55:13.54319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:55:13.54374 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:55:13.54454 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:55:13.54539 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:55:13.54636 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:55:13.54693 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:55:13.54768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:55:13.54843 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:55:13.54935 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:55:13.55015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:55:13.55132 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:55:13.55297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:55:13.55382 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:55:13.55450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:55:13.55542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:55:13.55602 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:55:13.55671 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:55:13.55743 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:55:13.56312 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:55:13.56458 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:55:13.56660 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:55:13.56735 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:55:13.56820 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:55:13.56893 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:55:13.56998 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:55:13.57084 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:55:13.57176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:55:13.57234 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:55:13.57333 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:55:13.57396 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:55:13.57580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:55:13.57666 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:55:58.94589 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:55:58.97553 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:55:58.98896 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:55:59.00254 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:55:59.01500 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:55:59.02944 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:55:59.05282 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:55:59.05693 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:56:44.05171 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.06266 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.07901 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.14818 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.16167 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.18196 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.20343 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.21702 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.23101 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.25213 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.27240 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.28539 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.29851 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:56:44.31382 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:57:58.82177 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:57:58.83841 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:57:58.85462 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:57:58.97272 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:57:58.97620 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:58:28.51619 2020-06-27 12:58:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/3455": Too many open files
2020-06-27_12:58:28.51685 :
2020-06-27_12:58:28.51828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:58:28.52057 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:58:28.52153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:58:28.52272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:58:28.52364 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:58:28.52475 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:58:28.52546 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:58:28.52622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:58:28.52693 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:58:28.52777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:58:28.52853 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:58:28.52943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:58:28.53014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:58:28.53077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:58:28.53162 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:58:28.53499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:58:28.53597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:58:28.53725 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:58:28.53884 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:58:28.53983 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:58:28.54125 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:58:28.54219 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:58:28.54341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:58:28.54438 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:58:28.54520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:58:28.54598 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:58:28.54694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:58:28.54892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:58:28.55033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:58:28.55101 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:58:28.55233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:58:28.55325 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:58:28.55408 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:58:28.55488 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:58:28.55554 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:58:28.55636 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:58:28.55718 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:58:28.55788 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:58:28.55867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:58:28.55951 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:58:28.56015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:58:28.56276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:58:28.56348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:58:28.56409 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:58:28.56513 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:58:28.56600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:58:28.56657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:58:28.57035 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:58:28.57178 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:58:28.57571 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:58:28.57682 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:58:28.57958 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:58:28.58057 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:58:28.58140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:58:28.58195 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:58:28.58259 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:58:28.58338 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:58:28.58433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:58:28.58496 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:58:28.58580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:58:28.58657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:58:43.68080 2020-06-27 12:58:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:58:43.68367 :
2020-06-27_12:58:43.68585 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:58:43.68689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:58:43.68825 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:58:43.68955 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:58:43.69033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:58:43.69146 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:58:43.69258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:58:43.69550 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:58:43.69746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:58:43.70055 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:58:43.70388 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:58:43.70494 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:58:43.70569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:58:43.70659 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:58:43.70732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:58:43.70817 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:58:43.70904 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:58:43.71051 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:58:43.71240 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:58:43.71320 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:58:43.72297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:58:43.72450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:58:43.72588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:58:43.72669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:58:43.72732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:58:43.72824 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:58:43.72927 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:58:43.72988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:58:43.73134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:58:43.73691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:58:43.73778 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:58:43.73985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:58:43.74181 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:58:43.74289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:58:43.74395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:58:43.74477 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:58:43.74569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:58:43.74688 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:58:43.74832 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:58:43.74918 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:58:43.74997 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:58:43.75149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:58:43.75297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:58:43.75402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:58:43.75492 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:58:43.75597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:58:43.75674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:58:43.75786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:58:43.76057 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:58:43.76152 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:58:43.76241 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:58:43.76362 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:58:43.76436 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:58:43.76524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:58:43.76681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:58:43.76876 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:58:43.76961 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:58:43.77047 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:58:43.77150 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:58:43.77311 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:58:43.77444 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:58:58.63219 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:58:58.63683 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:59:13.94187 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:13.95588 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:13.96988 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:13.98518 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:14.02257 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:14.27704 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:14.30616 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:59:14.30855 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:59:29.15455 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.17071 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.18431 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.19653 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.20864 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.22476 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.23723 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.25072 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.28580 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.72118 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.73752 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.92372 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:29.98467 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.25300 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.36493 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.37955 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.39725 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.41170 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.42553 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.43930 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.48278 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.57693 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.71260 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:30.99499 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.01149 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.02467 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.03953 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.05413 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.09697 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.11957 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_12:59:31.15178 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_12:59:31.15612 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_12:59:31.16615 2020-06-27 12:59:31 - PG::InsufficientResources - ERROR:  could not read block 9 in file "base/16385/2610": Too many open files
2020-06-27_12:59:31.18139 :
2020-06-27_12:59:31.18424 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:59:31.18761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:59:31.19064 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:59:31.19368 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:59:31.19798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:59:31.22061 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:59:31.22167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:59:31.22851 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:59:31.22994 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:59:31.23120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:59:31.23207 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:59:31.23280 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:59:31.23366 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:59:31.23418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:59:31.23493 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:59:31.23584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:59:31.23727 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:59:31.23823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:59:31.23931 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:59:31.24016 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:59:31.24094 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:59:31.24175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:59:31.24257 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:59:31.24351 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:59:31.24460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:59:31.24905 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:59:31.25486 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:59:31.25815 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:59:31.25914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:59:31.26076 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:59:31.26191 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:59:31.26281 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:59:31.26375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:59:31.26448 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:59:31.26534 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:59:31.26618 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:59:31.26941 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:59:31.27107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:59:31.27213 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:59:31.27366 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:59:31.27569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:59:31.27750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:59:31.28011 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:59:31.28142 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:59:31.28433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:59:31.28607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:59:31.28784 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:59:31.29077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:59:31.29328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:59:31.29418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:59:31.29533 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:59:31.29767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:59:31.29892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:59:31.30016 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:59:31.30102 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:59:31.30226 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:59:31.30321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:59:31.30473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:59:31.30604 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:59:31.30685 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:59:31.30768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:59:43.75266 2020-06-27 12:59:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2679": Too many open files
2020-06-27_12:59:43.75405 :
2020-06-27_12:59:43.75688 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:59:43.76033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:59:43.76134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:59:43.76232 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:59:43.76372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:59:43.76481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:59:43.76612 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:59:43.76714 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:59:43.76816 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:59:43.76980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:59:43.77051 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:59:43.77138 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:59:43.77245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:59:43.77372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:59:43.77449 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:59:43.77556 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:59:43.77671 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:59:43.77779 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:59:43.77866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:59:43.78135 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:59:43.78373 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:59:43.79615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:59:43.80128 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:59:43.80448 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:59:43.80904 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:59:43.81014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:59:43.81125 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:59:43.81639 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:59:43.81802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:59:43.81917 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:59:43.81999 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:59:43.82107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:59:43.82225 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:59:43.82316 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:59:43.82412 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:59:43.82550 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:59:43.82761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:59:43.82867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:59:43.82997 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:59:43.83080 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:59:43.83163 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:59:43.83250 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:59:43.83325 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:59:43.83391 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:59:43.83466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:59:43.83537 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:59:43.83605 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:59:43.83690 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:59:43.83764 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:59:43.83821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:59:43.83914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:59:43.83996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:59:43.84078 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:59:43.84182 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:59:43.84295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:59:43.84373 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:59:43.84447 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:59:43.84513 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:59:43.84606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:59:43.84692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:59:43.84773 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_12:59:58.64974 2020-06-27 12:59:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_12:59:58.66197 :
2020-06-27_12:59:58.66313 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_12:59:58.66469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_12:59:58.66596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_12:59:58.66725 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_12:59:58.66812 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_12:59:58.67001 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_12:59:58.67153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_12:59:58.67242 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_12:59:58.67344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_12:59:58.67465 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_12:59:58.67543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_12:59:58.67643 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_12:59:58.67735 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_12:59:58.67796 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_12:59:58.67861 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_12:59:58.67943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_12:59:58.68077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_12:59:58.68177 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_12:59:58.68318 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_12:59:58.68711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_12:59:58.68781 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_12:59:58.68903 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_12:59:58.69028 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_12:59:58.69148 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_12:59:58.69367 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_12:59:58.69503 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_12:59:58.69623 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_12:59:58.69741 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_12:59:58.69870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_12:59:58.69943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_12:59:58.70037 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_12:59:58.70175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:59:58.70296 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:59:58.70374 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:59:58.70480 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_12:59:58.70626 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_12:59:58.70740 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_12:59:58.70947 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_12:59:58.71115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_12:59:58.71272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_12:59:58.71501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_12:59:58.71607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_12:59:58.71681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_12:59:58.71802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_12:59:58.71889 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_12:59:58.72014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:59:58.72109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_12:59:58.72181 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_12:59:58.72238 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_12:59:58.72333 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_12:59:58.72382 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_12:59:58.72452 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_12:59:58.72515 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_12:59:58.72583 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_12:59:58.72688 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_12:59:58.72763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_12:59:58.72899 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_12:59:58.73072 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_12:59:58.73143 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_12:59:58.73207 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_12:59:58.73562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:00:13.67428 2020-06-27 13:00:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:00:13.67516 :
2020-06-27_13:00:13.67587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:00:13.67664 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:00:13.67721 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:00:13.67789 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:00:13.67893 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:00:13.67999 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:00:13.68094 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:00:13.68358 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:00:13.68460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:00:13.68687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:00:13.68760 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:00:13.68831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:00:13.68924 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:00:13.68993 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:00:13.69090 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:00:13.69243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:00:13.69326 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:00:13.69393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:00:13.69489 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:00:13.69579 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:00:13.69653 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:00:13.69760 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:00:13.69860 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:00:13.69945 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:00:13.70005 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:00:13.70079 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:00:13.70162 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:00:13.70269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:00:13.70387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:00:13.70471 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:00:13.70546 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:00:13.70656 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:00:13.70897 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:00:13.70987 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:00:13.71128 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:00:13.71269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:00:13.71389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:00:13.71553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:00:13.71753 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:00:13.71804 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:00:13.71957 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:00:13.72187 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:00:13.72345 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:00:13.72486 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:00:13.72694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:00:13.72805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:00:13.72923 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:00:13.73070 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:00:13.73157 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:00:13.73222 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:00:13.73310 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:00:13.73487 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:00:13.73625 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:00:13.73774 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:00:13.73887 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:00:13.73965 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:00:13.74062 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:00:13.74408 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:00:13.74555 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:00:13.74728 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:00:13.74822 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:00:44.18811 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:00:44.19067 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:00:44.19851 2020-06-27 13:00:44 - PG::InsufficientResources - ERROR:  could not read block 9 in file "base/16385/2610": Too many open files
2020-06-27_13:00:44.20434 :
2020-06-27_13:00:44.20823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:00:44.21407 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:00:44.21559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:00:44.21649 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:00:44.21777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:00:44.21931 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:00:44.22103 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:00:44.22206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:00:44.22418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:00:44.22556 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:00:44.22672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:00:44.22920 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:00:44.23167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:00:44.23318 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:00:44.23521 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:00:44.23734 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:00:44.23901 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:00:44.24004 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:00:44.24221 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:00:44.24517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:00:44.24609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:00:44.24689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:00:44.24766 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:00:44.24908 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:00:44.25015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:00:44.25303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:00:44.25395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:00:44.25479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:00:44.25560 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:00:44.25627 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:00:44.25713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:00:44.25802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:00:44.25929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:00:44.26001 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:00:44.26094 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:00:44.26301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:00:44.26393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:00:44.26465 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:00:44.26572 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:00:44.26672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:00:44.26753 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:00:44.26823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:00:44.26911 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:00:44.27019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:00:44.27116 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:00:44.27203 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:00:44.27278 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:00:44.27376 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:00:44.27470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:00:44.27592 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:00:44.27686 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:00:44.27800 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:00:44.27907 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:00:44.28108 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:00:44.28247 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:00:44.28386 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:00:44.28527 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:00:44.28595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:00:44.28669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:00:44.28797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:00:44.29014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:00:58.54811 2020-06-27 13:00:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:00:58.55518 :
2020-06-27_13:00:58.55681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:00:58.55917 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:00:58.56000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:00:58.56100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:00:58.56217 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:00:58.56381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:00:58.56484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:00:58.56584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:00:58.56678 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:00:58.56759 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:00:58.56821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:00:58.56912 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:00:58.57041 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:00:58.57147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:00:58.57235 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:00:58.57295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:00:58.57353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:00:58.57451 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:00:58.57542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:00:58.57670 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:00:58.57749 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:00:58.57888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:00:58.57986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:00:58.58354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:00:58.58480 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:00:58.58656 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:00:58.58793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:00:58.58989 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:00:58.59114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:00:58.59200 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:00:58.59442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:00:58.59568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:00:58.59638 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:00:58.59757 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:00:58.59880 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:00:58.59966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:00:58.60026 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:00:58.60109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:00:58.60229 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:00:58.60320 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:00:58.60402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:00:58.60468 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:00:58.60575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:00:58.60694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:00:58.60786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:00:58.60906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:00:58.60992 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:00:58.61082 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:00:58.61181 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:00:58.61269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:00:58.61360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:00:58.61540 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:00:58.61643 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:00:58.61724 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:00:58.61815 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:00:58.61919 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:00:58.62012 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:00:58.62180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:00:58.62275 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:00:58.62379 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:00:58.62475 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:01:13.72121 2020-06-27 13:01:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/3455": Too many open files
2020-06-27_13:01:13.72188 :
2020-06-27_13:01:13.72515 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:01:13.73130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:01:13.73284 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:01:13.74331 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:01:13.74817 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:01:13.75048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:01:13.75177 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:01:13.75312 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:01:13.75548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:01:13.75689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:01:13.75798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:01:13.76162 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:01:13.76390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:01:13.76556 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:01:13.78209 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:01:13.78630 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:01:13.78767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:01:13.78871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:01:13.78951 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:01:13.79061 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:01:13.79161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:01:13.79401 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:01:13.79563 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:01:13.79663 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:01:13.79798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:01:13.79893 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:01:13.79978 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:01:13.80156 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:01:13.80338 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:01:13.80453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:01:13.80596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:01:13.80699 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:13.80787 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:13.80954 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:13.81163 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:01:13.81284 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:01:13.81357 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:13.81430 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:13.81491 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:13.81689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:01:13.81809 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:01:13.82032 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:01:13.82134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:01:13.82251 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:01:13.82534 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:01:13.82650 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:13.82797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:13.82931 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:01:13.83050 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:01:13.83131 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:01:13.83276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:01:13.83369 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:01:13.83496 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:01:13.83699 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:01:13.83852 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:01:13.84112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:01:13.84225 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:01:13.84339 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:01:13.84472 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:01:13.84575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:01:13.84710 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:01:28.70086 2020-06-27 13:01:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2615": Too many open files
2020-06-27_13:01:28.70148 :
2020-06-27_13:01:28.70214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:01:28.70276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:01:28.70346 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:01:28.70433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:01:28.70528 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:01:28.70616 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:01:28.70752 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:01:28.70867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:01:28.70967 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:01:28.71199 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:01:28.71471 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:01:28.71627 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:01:28.71848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:01:28.72068 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:01:28.72165 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:01:28.72342 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:01:28.72387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:01:28.72498 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:01:28.72596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:01:28.72710 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:01:28.72785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:01:28.72870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:01:28.73010 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:01:28.73132 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:01:28.73220 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:01:28.73308 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:01:28.73430 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:01:28.73548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:01:28.73655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:01:28.73780 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:01:28.73860 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:01:28.73923 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:28.73997 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:28.74099 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:28.74245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:01:28.74348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:01:28.74459 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:28.74550 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:28.74699 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:28.74881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:01:28.75165 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:01:28.75273 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:01:28.75385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:01:28.75451 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:01:28.75579 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:01:28.75662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:28.75755 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:28.75883 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:01:28.75993 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:01:28.76083 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:01:28.76254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:01:28.76365 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:01:28.76469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:01:28.76570 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:01:28.76678 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:01:28.76767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:01:28.76848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:01:28.76954 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:01:28.77074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:01:28.77159 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:01:28.77243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:01:43.59581 2020-06-27 13:01:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:01:43.59684 :
2020-06-27_13:01:43.59806 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:01:43.59899 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:01:43.60026 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:01:43.60139 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:01:43.60234 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:01:43.60462 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:01:43.60532 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:01:43.60609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:01:43.60702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:01:43.60777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:01:43.60849 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:01:43.61301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:01:43.61435 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:01:43.61588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:01:43.61696 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:01:43.61818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:01:43.61914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:01:43.62009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:01:43.62115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:01:43.62227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:01:43.62312 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:01:43.62412 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:01:43.62491 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:01:43.62574 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:01:43.62652 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:01:43.62778 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:01:43.62885 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:01:43.62956 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:01:43.63072 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:01:43.63175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:01:43.63305 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:01:43.63397 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:43.63485 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:43.63600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:43.63699 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:01:43.63763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:01:43.63866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:43.63950 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:43.64024 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:43.64095 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:01:43.64184 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:01:43.64354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:01:43.64473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:01:43.64694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:01:43.64784 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:01:43.64916 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:43.65018 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:43.65142 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:01:43.65455 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:01:43.65573 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:01:43.65704 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:01:43.65883 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:01:43.66156 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:01:43.66317 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:01:43.66413 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:01:43.66562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:01:43.66645 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:01:43.66747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:01:43.66818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:01:43.66915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:01:43.67045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:01:58.54000 2020-06-27 13:01:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:01:58.54074 :
2020-06-27_13:01:58.54135 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:01:58.54218 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:01:58.54319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:01:58.54453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:01:58.54537 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:01:58.54608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:01:58.54695 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:01:58.54806 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:01:58.54884 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:01:58.54999 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:01:58.55085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:01:58.55220 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:01:58.55309 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:01:58.55398 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:01:58.55475 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:01:58.55541 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:01:58.55646 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:01:58.55705 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:01:58.55791 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:01:58.55862 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:01:58.55987 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:01:58.56084 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:01:58.56164 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:01:58.56241 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:01:58.56312 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:01:58.56393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:01:58.56507 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:01:58.56608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:01:58.56729 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:01:58.56975 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:01:58.57049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:01:58.57134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:58.57208 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:58.57300 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:58.57385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:01:58.57462 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:01:58.57542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:01:58.57644 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:01:58.57714 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:01:58.57816 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:01:58.57897 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:01:58.57984 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:01:58.58387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:01:58.58462 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:01:58.58553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:01:58.58629 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:58.58717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:01:58.58811 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:01:58.58883 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:01:58.58948 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:01:58.59020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:01:58.59091 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:01:58.59149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:01:58.59237 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:01:58.59308 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:01:58.59389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:01:58.59508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:01:58.59607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:01:58.59708 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:01:58.59807 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:01:58.59925 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:02:13.70618 2020-06-27 13:02:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2678": Too many open files
2020-06-27_13:02:13.70704 :
2020-06-27_13:02:13.70808 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:02:13.70887 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:02:13.70946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:02:13.71046 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:02:13.71120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:02:13.71240 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:02:13.71417 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:02:13.71597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:02:13.71802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:02:13.72439 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:02:13.72562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:02:13.72685 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:02:13.72922 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:02:13.73523 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:02:13.73724 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:02:13.74015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:02:13.74131 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:02:13.74218 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:02:13.74311 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:02:13.74482 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:02:13.74714 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:02:13.75060 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:02:13.75153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:02:13.75236 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:02:13.75313 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:02:13.75395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:02:13.75479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:02:13.75577 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:02:13.75669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:02:13.75751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:02:13.75831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:02:13.75912 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:13.76016 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:13.76112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:13.76210 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:02:13.76379 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:02:13.76543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:13.76615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:13.76778 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:13.76891 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:02:13.77015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:02:13.77118 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:02:13.77214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:02:13.77302 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:02:13.77428 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:02:13.77524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:13.77639 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:13.77748 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:02:13.77852 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:02:13.77996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:02:13.78077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:02:13.78174 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:02:13.78288 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:02:13.78437 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:02:13.78514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:02:13.78616 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:02:13.78718 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:02:13.78805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:02:13.78900 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:02:13.79019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:02:13.79092 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:02:28.35678 2020-06-27 13:02:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:02:28.35863 :
2020-06-27_13:02:28.35953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:02:28.36053 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:02:28.36674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:02:28.36794 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:02:28.36916 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:02:28.37023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:02:28.37169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:02:28.37294 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:02:28.37385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:02:28.37480 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:02:28.37554 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:02:28.37702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:02:28.37779 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:02:28.37871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:02:28.38059 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:02:28.38182 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:02:28.38297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:02:28.38392 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:02:28.38460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:02:28.38616 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:02:28.38715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:02:28.38805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:02:28.38942 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:02:28.39012 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:02:28.39110 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:02:28.39321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:02:28.39762 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:02:28.39849 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:02:28.39985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:02:28.40057 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:02:28.40192 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:02:28.40289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:28.40353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:28.40435 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:28.40526 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:02:28.40610 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:02:28.40694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:28.40768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:28.40842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:28.40939 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:02:28.41051 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:02:28.41147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:02:28.41243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:02:28.41405 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:02:28.41477 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:02:28.41553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:28.41626 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:28.41707 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:02:28.41798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:02:28.41921 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:02:28.42028 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:02:28.42112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:02:28.42190 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:02:28.42268 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:02:28.42364 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:02:28.42433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:02:28.42513 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:02:28.42584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:02:28.42668 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:02:28.42735 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:02:28.42804 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:02:43.93524 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:43.95219 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:43.96686 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:43.99076 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.00680 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.02372 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.04162 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.05478 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.07006 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.08588 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.09977 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.11278 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.12617 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.13921 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.15484 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.16924 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.18554 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.19880 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.21212 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.22727 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.24111 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.26184 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.28784 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.30270 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.31729 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.33091 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.34991 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.36829 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.38337 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.39713 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.41009 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.42286 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.43708 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.45502 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.46811 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.48117 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.49481 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.50771 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.52164 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.53456 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.54757 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.56072 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.57915 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.59213 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.61223 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.62669 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.63999 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.65375 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.66958 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.68503 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.69760 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.71048 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.72351 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.73685 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.74938 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.76228 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.77511 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.79101 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.80326 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.81609 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.82878 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.85067 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.86486 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.88432 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.89688 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.90981 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.92381 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.93640 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.94906 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.96181 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.97450 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:44.98785 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.00247 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.01533 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.02812 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.05109 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.06413 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.10874 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.12090 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.13528 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.14930 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.16345 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.18110 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.19520 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.20939 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.23044 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.24353 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.25789 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.27273 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.28745 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.30454 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.31948 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.33478 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.34804 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.36307 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.37688 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.39025 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.40689 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.41752 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.43057 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.44447 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.45802 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.47207 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.48682 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.51481 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.52897 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.54291 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.55847 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.57314 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.58728 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.60108 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.61524 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:02:45.64745 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:02:45.64985 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:02:45.65548 2020-06-27 13:02:45 - PG::InsufficientResources - ERROR:  could not read block 9 in file "base/16385/2610": Too many open files
2020-06-27_13:02:45.65641 :
2020-06-27_13:02:45.65725 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:02:45.65863 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:02:45.66008 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:02:45.66100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:02:45.66202 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:02:45.66291 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:02:45.66472 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:02:45.66930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:02:45.67058 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:02:45.67555 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:02:45.67801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:02:45.67920 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:02:45.68161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:02:45.68409 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:02:45.68550 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:02:45.68636 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:02:45.68772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:02:45.68897 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:02:45.69155 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:02:45.69505 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:02:45.69603 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:02:45.69685 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:02:45.69992 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:02:45.70584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:02:45.70717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:02:45.70806 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:02:45.70949 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:02:45.71176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:02:45.71265 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:02:45.71358 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:02:45.71475 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:02:45.71575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:45.71672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:45.71724 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:45.71821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:02:45.71910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:02:45.71990 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:45.72087 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:45.72189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:45.72303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:02:45.72397 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:02:45.72533 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:02:45.72652 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:02:45.72843 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:02:45.72930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:02:45.73023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:45.73185 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:45.73297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:02:45.73389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:02:45.73491 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:02:45.73595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:02:45.73680 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:02:45.73759 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:02:45.73849 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:02:45.73925 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:02:45.74014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:02:45.74100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:02:45.74222 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:02:45.74302 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:02:45.74400 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:02:45.74483 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:02:58.54321 2020-06-27 13:02:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:02:58.54463 :
2020-06-27_13:02:58.54573 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:02:58.54664 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:02:58.54755 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:02:58.54828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:02:58.54915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:02:58.54997 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:02:58.55089 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:02:58.55206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:02:58.55594 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:02:58.55699 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:02:58.55780 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:02:58.55871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:02:58.55924 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:02:58.55988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:02:58.56051 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:02:58.56108 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:02:58.56170 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:02:58.56216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:02:58.56269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:02:58.56328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:02:58.56405 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:02:58.56495 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:02:58.56554 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:02:58.56609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:02:58.56680 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:02:58.56745 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:02:58.56793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:02:58.56868 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:02:58.56955 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:02:58.57030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:02:58.57113 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:02:58.57173 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:58.57243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:58.57317 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:58.57405 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:02:58.57772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:02:58.57871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:02:58.57976 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:02:58.58053 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:02:58.58122 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:02:58.59086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:02:58.59291 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:02:58.59379 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:02:58.59480 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:02:58.59586 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:02:58.59846 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:58.60028 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:02:58.60105 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:02:58.60320 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:02:58.60482 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:02:58.60571 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:02:58.60644 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:02:58.60715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:02:58.60806 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:02:58.60906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:02:58.61007 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:02:58.61089 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:02:58.61166 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:02:58.61228 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:02:58.61340 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:02:58.61425 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:03:13.48347 2020-06-27 13:03:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:03:13.49994 :
2020-06-27_13:03:13.50241 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:03:13.50534 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:03:13.50645 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:03:13.50732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:03:13.50846 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:03:13.50914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:03:13.51002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:03:13.51085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:03:13.51161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:03:13.51236 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:03:13.51283 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:03:13.51338 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:03:13.51394 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:03:13.51457 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:03:13.51549 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:03:13.51659 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:03:13.51730 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:03:13.51798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:03:13.51882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:03:13.51950 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:03:13.52020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:03:13.52102 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:03:13.52169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:03:13.52265 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:03:13.52341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:03:13.52420 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:03:13.52494 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:03:13.52569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:03:13.52641 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:03:13.52736 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:03:13.52802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:03:13.52867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:13.52913 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:13.52977 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:13.53054 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:03:13.53127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:03:13.53192 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:13.53269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:13.53342 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:13.53399 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:03:13.53467 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:03:13.53539 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:03:13.53622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:03:13.53695 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:03:13.53770 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:03:13.53837 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:13.53919 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:13.53982 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:03:13.54050 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:03:13.54107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:03:13.54188 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:03:13.54273 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:03:13.54344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:03:13.54414 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:03:13.54489 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:03:13.54584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:03:13.54639 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:03:13.54703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:03:13.54772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:03:13.54844 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:03:13.54910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:03:28.47376 2020-06-27 13:03:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:03:28.47609 :
2020-06-27_13:03:28.47726 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:03:28.47829 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:03:28.47962 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:03:28.48072 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:03:28.48163 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:03:28.48257 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:03:28.48384 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:03:28.48485 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:03:28.48597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:03:28.48743 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:03:28.48922 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:03:28.49103 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:03:28.49232 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:03:28.49333 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:03:28.49426 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:03:28.49537 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:03:28.49635 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:03:28.49730 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:03:28.49836 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:03:28.50361 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:03:28.50466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:03:28.50567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:03:28.50693 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:03:28.50783 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:03:28.50952 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:03:28.51156 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:03:28.51268 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:03:28.51356 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:03:28.51478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:03:28.51567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:03:28.51666 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:03:28.51797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:28.51888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:28.52000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:28.52112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:03:28.52189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:03:28.52301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:28.52442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:28.52559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:28.52658 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:03:28.52775 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:03:28.52848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:03:28.52930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:03:28.53030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:03:28.53176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:03:28.53306 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:28.53404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:28.53494 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:03:28.53592 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:03:28.53689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:03:28.53785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:03:28.53906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:03:28.54015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:03:28.54114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:03:28.54243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:03:28.54338 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:03:28.54421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:03:28.54506 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:03:28.54603 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:03:28.54729 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:03:28.54798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:03:43.89801 2020-06-27 13:03:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:03:43.89936 :
2020-06-27_13:03:43.90115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:03:43.90346 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:03:43.90493 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:03:43.90697 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:03:43.90814 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:03:43.91057 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:03:43.91413 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:03:43.91522 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:03:43.91614 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:03:43.91686 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:03:43.91769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:03:43.91852 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:03:43.91966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:03:43.92150 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:03:43.92254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:03:43.92346 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:03:43.92425 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:03:43.92517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:03:43.92620 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:03:43.92717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:03:43.92786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:03:43.92850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:03:43.92926 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:03:43.92995 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:03:43.93072 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:03:43.93166 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:03:43.93248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:03:43.93314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:03:43.93381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:03:43.93462 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:03:43.93570 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:03:43.93648 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:43.93715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:43.93796 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:43.93967 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:03:43.94043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:03:43.94140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:43.94205 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:43.94295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:43.94360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:03:43.94717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:03:43.94840 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:03:43.94949 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:03:43.95057 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:03:43.95160 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:03:43.95276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:43.95369 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:43.95494 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:03:43.95582 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:03:43.95650 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:03:43.95736 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:03:43.95801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:03:43.95882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:03:43.95989 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:03:43.96087 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:03:43.96201 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:03:43.96277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:03:43.96390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:03:43.96517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:03:43.96785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:03:43.97246 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:03:58.38360 2020-06-27 13:03:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:03:58.39659 :
2020-06-27_13:03:58.39958 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:03:58.40048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:03:58.40158 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:03:58.40234 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:03:58.40299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:03:58.40390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:03:58.40453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:03:58.40548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:03:58.40628 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:03:58.40702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:03:58.40786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:03:58.40874 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:03:58.40977 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:03:58.41049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:03:58.41118 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:03:58.41187 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:03:58.41261 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:03:58.41314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:03:58.41400 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:03:58.41466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:03:58.41512 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:03:58.41569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:03:58.41645 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:03:58.41720 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:03:58.42012 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:03:58.42102 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:03:58.42163 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:03:58.42228 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:03:58.42296 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:03:58.42373 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:03:58.42452 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:03:58.42514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:58.42575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:58.42644 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:58.42721 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:03:58.42788 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:03:58.42857 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:03:58.42924 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:03:58.42983 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:03:58.43053 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:03:58.43118 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:03:58.43184 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:03:58.43258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:03:58.43332 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:03:58.43387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:03:58.43456 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:58.43520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:03:58.43582 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:03:58.43644 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:03:58.43733 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:03:58.43977 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:03:58.44045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:03:58.44127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:03:58.44497 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:03:58.44561 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:03:58.44605 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:03:58.44665 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:03:58.44728 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:03:58.44785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:03:58.44854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:03:58.44934 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:04:13.73352 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.74537 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.75795 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.77132 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.78476 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.79668 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.81161 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.82567 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.84291 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.86495 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.87784 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:04:13.90132 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:04:13.90448 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:05:13.88820 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:13.90155 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:13.91476 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:13.93137 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:13.96843 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:13.99072 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:14.00472 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:14.04996 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:14.06443 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:14.08388 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:28.79366 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:28.80720 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:05:28.83590 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:05:28.83960 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:05:44.11896 2020-06-27 13:05:44 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2684": Too many open files
2020-06-27_13:05:44.11974 :
2020-06-27_13:05:44.12070 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:05:44.12147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:05:44.12219 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:05:44.12307 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:05:44.12354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:05:44.12442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:05:44.12518 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:05:44.12580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:05:44.12657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:05:44.12768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:05:44.12844 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:05:44.12931 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:05:44.12987 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:05:44.13056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:05:44.13122 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:05:44.13675 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:05:44.14046 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:05:44.14125 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:05:44.14249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:05:44.14377 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:05:44.14457 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:05:44.14597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:05:44.14768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:05:44.15375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:05:44.15573 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:05:44.15674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:05:44.15833 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:05:44.15998 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:05:44.16227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:05:44.16474 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:05:44.16968 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:05:44.17082 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:05:44.17197 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:05:44.17364 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:05:44.17905 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:05:44.18033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:05:44.18374 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:05:44.18624 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:05:44.18820 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:05:44.19097 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:05:44.19438 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:05:44.19966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:05:44.20341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:05:44.20820 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:05:44.21222 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:05:44.21606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:05:44.22248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:05:44.22936 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:05:44.23227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:05:44.23415 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:05:44.23609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:05:44.23862 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:05:44.24069 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:05:44.24189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:05:44.24385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:05:44.24517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:05:44.34445 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:05:44.34766 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:05:44.34855 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:05:44.35272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:05:44.35397 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:05:58.94351 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:05:58.94861 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:06:13.88455 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:06:13.89098 2020-06-27 13:06:13 - PG::InsufficientResources - ERROR:  could not read block 9 in file "base/16385/2610": Too many open files
2020-06-27_13:06:13.89189 :
2020-06-27_13:06:13.89269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:06:13.89375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:06:13.89472 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:06:13.89567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:06:13.89887 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:06:13.90227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:06:13.90326 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:06:13.90570 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:06:13.90657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:06:13.90776 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:06:13.90876 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:06:13.90947 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:06:13.91242 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:06:13.91345 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:06:13.91448 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:06:13.91551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:06:13.91632 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:06:13.91793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:06:13.91916 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:06:13.92001 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:06:13.92167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:06:13.92272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:06:13.92401 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:06:13.92501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:06:13.92617 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:06:13.92742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:06:13.92850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:06:13.93271 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:06:13.93482 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:06:13.93664 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:06:13.93770 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:06:13.93928 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:06:13.94056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:06:13.94175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:06:13.94317 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:06:13.94475 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:06:13.94643 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:06:13.94751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:06:13.94849 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:06:13.94952 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:06:13.95048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:06:13.95190 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:06:13.95269 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:06:13.95394 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:06:13.95494 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:06:13.95621 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:06:13.95735 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:06:13.95860 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:06:13.95963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:06:13.96132 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:06:13.96219 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:06:13.96671 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:06:13.96865 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:06:13.96966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:06:13.97100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:06:13.97189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:06:13.97596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:06:13.97705 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:06:13.97826 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:06:13.97926 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:06:13.98043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:06:28.40593 2020-06-27 13:06:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:06:28.40734 :
2020-06-27_13:06:28.40884 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:06:28.40974 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:06:28.41052 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:06:28.41129 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:06:28.41205 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:06:28.41321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:06:28.41418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:06:28.41486 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:06:28.41608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:06:28.41717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:06:28.41816 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:06:28.42040 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:06:28.42149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:06:28.42256 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:06:28.42346 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:06:28.42452 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:06:28.42544 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:06:28.42616 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:06:28.42684 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:06:28.42776 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:06:28.42838 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:06:28.42913 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:06:28.42976 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:06:28.43079 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:06:28.43140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:06:28.43264 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:06:28.43370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:06:28.43457 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:06:28.43574 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:06:28.43921 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:06:28.44034 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:06:28.44119 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:06:28.44216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:06:28.44303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:06:28.44580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:06:28.44660 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:06:28.44753 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:06:28.44865 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:06:28.44949 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:06:28.45046 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:06:28.45137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:06:28.45227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:06:28.45303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:06:28.45379 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:06:28.45444 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:06:28.45524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:06:28.45610 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:06:28.45690 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:06:28.45771 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:06:28.45859 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:06:28.45979 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:06:28.46051 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:06:28.46133 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:06:28.46234 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:06:28.46336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:06:28.46415 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:06:28.46499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:06:28.46574 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:06:28.46696 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:06:28.46773 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:06:28.46861 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:06:43.58251 2020-06-27 13:06:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:06:43.58319 :
2020-06-27_13:06:43.58459 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:06:43.58598 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:06:43.58697 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:06:43.58782 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:06:43.58863 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:06:43.59137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:06:43.59270 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:06:43.59332 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:06:43.59434 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:06:43.59564 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:06:43.59718 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:06:43.59833 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:06:43.59975 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:06:43.60043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:06:43.60112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:06:43.60219 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:06:43.60277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:06:43.60407 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:06:43.60470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:06:43.60584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:06:43.60732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:06:43.60793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:06:43.60886 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:06:43.60970 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:06:43.61055 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:06:43.61172 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:06:43.61264 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:06:43.61326 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:06:43.61468 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:06:43.61516 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:06:43.61593 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:06:43.61721 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:06:43.61794 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:06:43.61838 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:06:43.61902 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:06:43.61988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:06:43.62072 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:06:43.62127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:06:43.62205 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:06:43.62291 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:06:43.62359 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:06:43.62422 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:06:43.62484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:06:43.62548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:06:43.62613 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:06:43.62683 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:06:43.62741 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:06:43.62944 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:06:43.63100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:06:43.63183 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:06:43.63295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:06:43.63375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:06:43.63517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:06:43.63919 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:06:43.64097 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:06:43.64180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:06:43.64270 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:06:43.64342 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:06:43.64567 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:06:43.64720 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:06:43.64807 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:08:59.05365 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.06867 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.08247 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.09628 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.12937 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.14963 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.16368 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.17697 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.19312 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.21458 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.23193 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.24636 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.26016 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.28678 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.30198 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.32749 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.34465 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.35757 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.37307 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.38833 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.40218 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.41795 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.43130 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.44582 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.46369 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.47788 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.49160 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.50458 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.51825 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.53261 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.55170 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.56374 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.57940 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.59546 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.60882 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.62280 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.63678 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.65819 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.67139 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.68558 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.70097 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.71372 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.72666 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.73925 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.75228 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.76500 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.77810 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.79032 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.80523 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.81823 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.83253 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.84585 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.85795 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.86949 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.88224 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.89465 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.90816 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.92090 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.93564 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.94953 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.96279 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.97517 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:08:59.98799 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.00119 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.01445 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.04419 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.05825 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.07135 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.08550 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.09904 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.11699 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.13052 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.14398 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.15737 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.17094 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.18450 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.19805 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.21379 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.22767 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.24017 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.25403 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.26727 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.28053 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.29355 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.30653 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.31910 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.33256 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.34553 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.35797 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.37190 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.38431 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.39703 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.40919 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.43164 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.44449 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.46447 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.47754 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.49217 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.50587 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.51904 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.53174 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.54513 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.56069 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.57356 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.58760 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.60093 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.61555 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.63482 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.65015 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.66414 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.67676 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.69056 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.70605 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.71858 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.73161 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.74546 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.75816 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.79002 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.80470 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.83841 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.85217 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.86470 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.89545 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.90946 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.92268 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.95244 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.96484 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:00.97790 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.00852 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.02637 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.04003 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.07191 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.08437 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.13385 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.14739 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.16131 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.17825 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.19267 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.22625 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.23935 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.29207 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.30863 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.36970 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.38598 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.41689 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.43156 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:09:01.51020 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:09:13.96030 2020-06-27 13:09:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "global/2698": Too many open files
2020-06-27_13:09:13.96131 :
2020-06-27_13:09:13.96228 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:09:13.96332 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:09:13.96433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:09:13.96551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:09:13.96643 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:09:13.96732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:09:13.97049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:09:13.97177 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:09:13.97310 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:09:13.97442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:09:13.97550 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:09:13.97650 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:09:13.97829 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:09:13.98020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:09:13.98136 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:09:13.98241 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:09:13.98360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:09:13.98460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:09:13.98577 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:09:13.98696 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:09:13.98805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:09:13.98888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:09:13.98958 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:09:13.99060 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:09:13.99182 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:09:13.99390 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:09:13.99507 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:09:13.99602 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:09:13.99681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:09:13.99759 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:09:13.99862 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:09:13.99943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:09:14.00303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:09:14.00413 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:09:14.00606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:09:14.00743 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:09:14.00867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:09:14.01065 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:09:14.01226 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:09:14.01406 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:09:14.01579 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:09:14.01723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:09:14.01830 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:09:14.02086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:09:14.02196 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:09:14.02662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:09:14.02968 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:09:14.03075 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:09:14.03192 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:09:14.03322 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:09:14.03484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:09:14.03587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:09:14.03692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:09:14.03787 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:09:14.03979 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:09:14.04131 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:09:14.04249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:09:14.04344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:09:14.04433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:09:14.04492 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:09:14.04622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:09:28.33748 2020-06-27 13:09:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:09:28.33796 :
2020-06-27_13:09:28.33850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:09:28.33907 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:09:28.33956 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:09:28.34009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:09:28.34062 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:09:28.34119 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:09:28.34174 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:09:28.34229 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:09:28.34299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:09:28.34348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:09:28.34401 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:09:28.34499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:09:28.34608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:09:28.34709 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:09:28.34757 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:09:28.34801 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:09:28.34842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:09:28.34893 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:09:28.34946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:09:28.34991 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:09:28.35034 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:09:28.35084 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:09:28.35131 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:09:28.35185 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:09:28.35231 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:09:28.35277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:09:28.35322 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:09:28.35370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:09:28.35414 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:09:28.35464 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:09:28.35510 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:09:28.35554 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:09:28.35607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:09:28.35652 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:09:28.35711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:09:28.35772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:09:28.35823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:09:28.36078 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:09:28.36130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:09:28.36180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:09:28.36228 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:09:28.36276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:09:28.36321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:09:28.36365 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:09:28.36525 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:09:28.36579 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:09:28.36629 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:09:28.36702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:09:28.36751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:09:28.36806 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:09:28.36861 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:09:28.36914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:09:28.37318 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:09:28.37393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:09:28.37501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:09:28.37559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:09:28.37629 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:09:28.37681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:09:28.37742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:09:28.37934 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:09:28.38009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:09:43.59888 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:09:43.60224 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:09:58.78988 2020-06-27 13:09:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:09:58.79134 :
2020-06-27_13:09:58.79325 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:09:58.79484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:09:58.79714 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:09:58.79902 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:09:58.80002 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:09:58.80142 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:09:58.80359 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:09:58.80599 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:09:58.80734 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:09:58.81026 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:09:58.81220 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:09:58.81514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:09:58.81716 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:09:58.81910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:09:58.82020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:09:58.82136 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:09:58.82275 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:09:58.82381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:09:58.82517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:09:58.82673 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:09:58.82775 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:09:58.82963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:09:58.83086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:09:58.83208 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:09:58.83341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:09:58.83471 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:09:58.83599 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:09:58.83713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:09:58.83788 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:09:58.83938 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:09:58.84091 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:09:58.84188 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:09:58.84328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:09:58.84438 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:09:58.84558 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:09:58.84996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:09:58.85126 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:09:58.85263 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:09:58.85402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:09:58.85518 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:09:58.85614 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:09:58.85716 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:09:58.85875 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:09:58.86019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:09:58.86135 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:09:58.86306 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:09:58.86468 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:09:58.86546 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:09:58.86644 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:09:58.86772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:09:58.86855 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:09:58.86922 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:09:58.87091 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:09:58.87168 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:09:58.87321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:09:58.87405 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:09:58.87585 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:09:58.87781 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:09:58.87884 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:09:58.87985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:09:58.88086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:10:13.76373 2020-06-27 13:10:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:10:13.76479 :
2020-06-27_13:10:13.76568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:10:13.76674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:10:13.76792 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:10:13.77578 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:10:13.77745 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:10:13.78335 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:10:13.78484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:10:13.78743 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:10:13.79005 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:10:13.79131 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:10:13.79288 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:10:13.79457 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:10:13.79548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:10:13.79665 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:10:13.79785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:10:13.79930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:10:13.80058 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:10:13.81422 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:10:13.81751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:10:13.81863 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:10:13.81961 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:10:13.82053 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:10:13.82173 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:10:13.82277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:10:13.82415 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:10:13.82514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:10:13.82622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:10:13.82865 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:10:13.83026 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:10:13.83150 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:10:13.83306 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:10:13.83435 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:10:13.83559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:10:13.84042 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:10:13.84135 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:10:13.84239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:10:13.84477 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:10:13.84638 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:10:13.84751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:10:13.84852 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:10:13.84964 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:10:13.85193 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:10:13.85327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:10:13.85463 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:10:13.85870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:10:13.85990 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:10:13.86161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:10:13.86302 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:10:13.86473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:10:13.86564 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:10:13.86672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:10:13.86768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:10:13.86968 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:10:13.87073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:10:13.87149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:10:13.87387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:10:13.87721 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:10:13.88068 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:10:13.88355 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:10:13.88482 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:10:13.88704 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:10:28.49724 2020-06-27 13:10:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:10:28.49807 :
2020-06-27_13:10:28.49877 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:10:28.49958 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:10:28.50041 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:10:28.50108 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:10:28.50191 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:10:28.50281 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:10:28.50373 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:10:28.50453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:10:28.50532 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:10:28.50607 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:10:28.50700 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:10:28.50767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:10:28.50851 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:10:28.50939 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:10:28.51037 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:10:28.51121 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:10:28.51229 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:10:28.51319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:10:28.51409 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:10:28.51495 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:10:28.51568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:10:28.51649 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:10:28.51746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:10:28.51848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:10:28.51928 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:10:28.52020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:10:28.52108 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:10:28.52232 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:10:28.52305 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:10:28.52383 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:10:28.52465 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:10:28.52541 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:10:28.52644 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:10:28.52750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:10:28.52845 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:10:28.52931 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:10:28.53008 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:10:28.53140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:10:28.53205 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:10:28.53290 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:10:28.53359 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:10:28.53435 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:10:28.53524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:10:28.53610 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:10:28.53703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:10:28.53805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:10:28.53886 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:10:28.53988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:10:28.54064 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:10:28.54126 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:10:28.54204 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:10:28.54286 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:10:28.54380 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:10:28.54453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:10:28.54537 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:10:28.54605 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:10:28.54690 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:10:28.54769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:10:28.54853 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:10:28.54960 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:10:28.55066 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:14:28.34716 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:14:28.34849 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:15:13.32747 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:15:13.32860 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:15:43.37671 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:15:43.37779 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:16:13.58380 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:16:13.58557 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:16:28.43432 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:16:28.43644 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:16:58.25571 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:16:58.25681 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:17:13.30105 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:17:13.30234 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:17:28.20230 2020-06-27 13:17:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/3455": Too many open files
2020-06-27_13:17:28.21500 :
2020-06-27_13:17:28.21566 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:17:28.21611 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:17:28.21668 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:17:28.21731 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:17:28.21779 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:17:28.21817 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:17:28.21874 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:17:28.21932 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:17:28.21981 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:17:28.22037 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:17:28.22102 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:17:28.22262 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:17:28.22314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:17:28.22352 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:17:28.22404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:17:28.22437 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:17:28.22498 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:17:28.22566 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:17:28.22615 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:17:28.22687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:17:28.22733 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:17:28.22774 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:17:28.22811 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:17:28.23033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:17:28.23081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:17:28.23128 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:17:28.23173 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:17:28.23217 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:17:28.23256 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:17:28.23298 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:17:28.23336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:17:28.23375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:17:28.23417 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:17:28.23456 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:17:28.23493 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:17:28.23542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:17:28.23585 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:17:28.23633 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:17:28.23675 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:17:28.23729 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:17:28.23767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:17:28.23820 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:17:28.24014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:17:28.24056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:17:28.24107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:17:28.24267 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:17:28.24311 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:17:28.24343 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:17:28.24385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:17:28.24429 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:17:28.24465 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:17:28.24501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:17:28.24541 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:17:28.24577 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:17:28.24632 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:17:28.24679 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:17:28.24734 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:17:28.24797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:17:28.24856 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:17:28.24894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:17:28.24946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:17:43.71833 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:17:43.74873 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:17:43.77808 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:17:43.78161 2020-06-27 13:17:43 - PG::InsufficientResources - ERROR:  could not read block 9 in file "base/16385/2610": Too many open files
2020-06-27_13:17:43.78228 :
2020-06-27_13:17:43.78317 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:17:43.78372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:17:43.78431 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:17:43.78492 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:17:43.78545 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:17:43.78611 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:17:43.78653 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:17:43.78715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:17:43.78767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:17:43.78840 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:17:43.78898 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:17:43.78961 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:17:43.79034 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:17:43.79100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:17:43.79153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:17:43.79203 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:17:43.79273 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:17:43.79341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:17:43.79474 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:17:43.79571 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:17:43.79625 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:17:43.79679 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:17:43.79750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:17:43.79812 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:17:43.79878 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:17:43.79946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:17:43.80004 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:17:43.80080 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:17:43.80132 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:17:43.80185 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:17:43.80239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:17:43.80289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:17:43.80361 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:17:43.80418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:17:43.80489 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:17:43.80553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:17:43.80606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:17:43.80670 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:17:43.80746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:17:43.80804 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:17:43.80867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:17:43.80957 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:17:43.81041 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:17:43.81100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:17:43.81158 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:17:43.81212 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:17:43.81268 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:17:43.81339 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:17:43.81403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:17:43.81457 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:17:43.81499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:17:43.81595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:17:43.81663 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:17:43.81715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:17:43.81776 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:17:43.81832 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:17:43.81881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:17:43.81973 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:17:43.82050 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:17:43.82130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:17:43.82191 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:17:58.22636 2020-06-27 13:17:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:17:58.22705 :
2020-06-27_13:17:58.22747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:17:58.22795 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:17:58.22842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:17:58.22882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:17:58.22939 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:17:58.22989 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:17:58.23040 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:17:58.23090 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:17:58.23140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:17:58.23196 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:17:58.23249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:17:58.23286 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:17:58.23329 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:17:58.23371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:17:58.23520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:17:58.23561 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:17:58.23624 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:17:58.23662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:17:58.23702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:17:58.23737 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:17:58.23774 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:17:58.23817 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:17:58.23866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:17:58.23914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:17:58.23951 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:17:58.23996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:17:58.24039 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:17:58.24080 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:17:58.24120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:17:58.24155 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:17:58.24192 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:17:58.24239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:17:58.24281 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:17:58.24327 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:17:58.24371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:17:58.24417 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:17:58.24459 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:17:58.24514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:17:58.24555 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:17:58.24597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:17:58.24643 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:17:58.24681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:17:58.24724 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:17:58.24767 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:17:58.24915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:17:58.24967 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:17:58.25010 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:17:58.25106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:17:58.25476 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:17:58.25524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:17:58.25660 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:17:58.25744 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:17:58.25786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:17:58.25830 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:17:58.25868 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:17:58.25908 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:17:58.25942 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:17:58.25986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:17:58.26045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:17:58.26088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:17:58.26137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:18:13.41081 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:18:13.41229 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:18:28.33448 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:18:28.33581 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:18:43.35185 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:18:43.35295 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:18:58.38896 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:18:58.40069 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:18:58.41620 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:18:58.41713 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:19:13.32983 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:19:13.33207 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:19:43.37509 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:19:43.37654 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:19:58.53814 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:19:58.56474 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:19:58.59255 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:19:58.60498 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:19:58.63348 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:19:58.63502 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:20:13.25531 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.26731 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.27882 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.29175 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.30424 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.31637 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.32787 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.35371 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.36560 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.37812 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.38971 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.42008 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.43171 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.44370 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.45575 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.46760 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.47956 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.49142 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.51787 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.52935 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.56848 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.59393 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.60581 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.61753 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.71707 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.72785 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:13.74662 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:20:13.74772 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:20:28.36633 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:20:28.36778 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:20:43.38701 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:20:43.38890 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:20:58.47918 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:20:58.50455 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:20:58.50646 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:21:13.29017 2020-06-27 13:21:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/3455": Too many open files
2020-06-27_13:21:13.29384 :
2020-06-27_13:21:13.29661 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:21:13.29711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:21:13.29776 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:21:13.29823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:21:13.29890 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:21:13.29951 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:21:13.30030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:21:13.30077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:21:13.30127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:21:13.30187 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:21:13.30276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:21:13.30330 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:21:13.30385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:21:13.30488 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:21:13.30529 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:21:13.30594 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:21:13.30702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:21:13.30794 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:21:13.30870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:21:13.30939 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:21:13.30984 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:21:13.31035 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:21:13.31089 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:21:13.31161 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:21:13.31201 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:21:13.31247 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:21:13.31281 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:21:13.31326 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:21:13.31375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:21:13.31417 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:21:13.31467 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:21:13.31507 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:21:13.31544 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:21:13.31596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:21:13.31639 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:21:13.31685 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:21:13.31726 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:21:13.31770 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:21:13.31814 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:21:13.31881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:21:13.31941 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:21:13.31987 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:21:13.32032 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:21:13.32083 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:21:13.32127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:21:13.32169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:21:13.32209 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:21:13.32244 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:21:13.32404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:21:13.32473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:21:13.32536 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:21:13.32586 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:21:13.32626 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:21:13.32676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:21:13.32717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:21:13.32763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:21:13.32802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:21:13.32846 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:21:13.32878 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:21:13.32930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:21:13.32985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:21:28.31319 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:21:28.31475 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:21:43.33550 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:21:43.33679 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:21:58.24201 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:21:58.24307 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:22:13.42415 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:22:13.42581 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:22:28.28294 2020-06-27 13:22:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2663": Too many open files
2020-06-27_13:22:28.28337 :
2020-06-27_13:22:28.28371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:22:28.28432 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:22:28.28473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:22:28.28512 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:22:28.28552 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:22:28.28608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:22:28.28655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:22:28.28695 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:22:28.28741 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:22:28.28784 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:22:28.28833 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:22:28.28896 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:22:28.28950 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:22:28.28992 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:22:28.29048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:22:28.29097 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:22:28.29172 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:22:28.29214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:22:28.29255 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:22:28.29289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:22:28.29331 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:22:28.29376 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:22:28.29411 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:22:28.29450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:22:28.29484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:22:28.29519 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:22:28.29547 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:22:28.29580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:22:28.29621 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:22:28.29655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:22:28.29691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:22:28.29739 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:22:28.29778 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:22:28.29818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:22:28.29860 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:22:28.29904 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:22:28.29934 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:22:28.29974 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:22:28.30019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:22:28.30070 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:22:28.30110 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:22:28.30149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:22:28.30249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:22:28.30291 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:22:28.30330 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:22:28.30361 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:22:28.30398 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:22:28.30439 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:22:28.30478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:22:28.30515 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:22:28.30551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:22:28.30589 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:22:28.30621 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:22:28.30654 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:22:28.30687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:22:28.30727 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:22:28.30765 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:22:28.30807 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:22:28.30843 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:22:28.30907 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:22:28.30953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:22:43.14909 2020-06-27 13:22:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:22:43.14948 :
2020-06-27_13:22:43.14980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:22:43.15014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:22:43.15045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:22:43.15076 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:22:43.15114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:22:43.15147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:22:43.15180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:22:43.15212 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:22:43.15252 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:22:43.15284 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:22:43.15319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:22:43.15348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:22:43.15379 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:22:43.15413 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:22:43.15447 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:22:43.15481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:22:43.15521 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:22:43.15557 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:22:43.15588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:22:43.15622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:22:43.15653 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:22:43.15683 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:22:43.15715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:22:43.15750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:22:43.15784 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:22:43.15821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:22:43.15856 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:22:43.15891 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:22:43.15924 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:22:43.15958 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:22:43.15991 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:22:43.16023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:22:43.16052 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:22:43.16079 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:22:43.16115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:22:43.16149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:22:43.16185 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:22:43.16234 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:22:43.16267 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:22:43.16302 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:22:43.16338 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:22:43.16371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:22:43.16403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:22:43.16437 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:22:43.16469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:22:43.16509 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:22:43.16542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:22:43.16577 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:22:43.16612 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:22:43.16647 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:22:43.16689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:22:43.16727 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:22:43.16761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:22:43.16803 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:22:43.16839 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:22:43.16870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:22:43.16902 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:22:43.16932 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:22:43.16966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:22:43.17006 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:22:43.17045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:22:58.23978 2020-06-27 13:22:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:22:58.25226 :
2020-06-27_13:22:58.25275 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:22:58.25319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:22:58.25389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:22:58.25446 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:22:58.25491 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:22:58.25548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:22:58.25610 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:22:58.25655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:22:58.25702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:22:58.25742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:22:58.25785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:22:58.25828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:22:58.25871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:22:58.25918 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:22:58.25959 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:22:58.26009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:22:58.26067 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:22:58.26108 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:22:58.26143 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:22:58.26176 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:22:58.26212 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:22:58.26255 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:22:58.26297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:22:58.26336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:22:58.26375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:22:58.26410 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:22:58.26444 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:22:58.26477 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:22:58.26518 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:22:58.26559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:22:58.26606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:22:58.26649 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:22:58.26691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:22:58.26742 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:22:58.26792 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:22:58.26832 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:22:58.26871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:22:58.26939 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:22:58.26978 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:22:58.27028 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:22:58.27070 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:22:58.27111 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:22:58.27164 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:22:58.27206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:22:58.27250 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:22:58.27294 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:22:58.27347 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:22:58.27385 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:22:58.27451 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:22:58.27506 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:22:58.27549 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:22:58.27587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:22:58.27626 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:22:58.27676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:22:58.27730 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:22:58.27770 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:22:58.27827 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:22:58.27871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:22:58.27913 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:22:58.27956 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:22:58.27999 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:23:13.11763 2020-06-27 13:23:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:23:13.11791 :
2020-06-27_13:23:13.11818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:23:13.11845 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:23:13.11879 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:23:13.11905 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:23:13.11938 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:23:13.11973 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:23:13.12025 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:23:13.12053 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:23:13.12092 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:23:13.12127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:23:13.12151 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:23:13.12175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:23:13.12206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:23:13.12231 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:23:13.12258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:23:13.12296 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:23:13.12328 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:23:13.12359 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:23:13.12387 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:23:13.12416 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:23:13.12441 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:23:13.12467 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:23:13.12496 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:23:13.12522 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:23:13.12548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:23:13.12582 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:23:13.12606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:23:13.12630 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:23:13.12657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:23:13.12686 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:23:13.12711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:23:13.12738 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:13.12769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:13.12795 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:13.12824 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:23:13.12849 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:23:13.12881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:13.12905 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:13.12929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:13.12954 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:23:13.12981 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:23:13.13005 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:23:13.13031 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:23:13.13056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:23:13.13085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:23:13.13109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:13.13134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:13.13159 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:23:13.13187 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:23:13.13212 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:23:13.13239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:23:13.13264 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:23:13.13299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:23:13.13336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:23:13.13405 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:23:13.13449 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:23:13.13490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:23:13.13525 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:23:13.13557 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:23:13.13600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:23:13.13649 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:23:28.31386 2020-06-27 13:23:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:23:28.31426 :
2020-06-27_13:23:28.31473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:23:28.31527 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:23:28.31581 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:23:28.31632 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:23:28.31688 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:23:28.31724 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:23:28.31771 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:23:28.31825 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:23:28.31866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:23:28.31910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:23:28.31955 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:23:28.32001 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:23:28.32041 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:23:28.32095 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:23:28.32140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:23:28.32193 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:23:28.32245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:23:28.32290 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:23:28.32341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:23:28.32399 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:23:28.32432 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:23:28.32478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:23:28.32515 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:23:28.32555 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:23:28.32589 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:23:28.32641 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:23:28.32692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:23:28.32746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:23:28.32788 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:23:28.32838 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:23:28.32884 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:23:28.32915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:28.32953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:28.32992 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:28.33047 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:23:28.33099 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:23:28.33157 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:28.33209 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:28.33270 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:28.33329 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:23:28.33396 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:23:28.33453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:23:28.33508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:23:28.33565 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:23:28.33634 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:23:28.33695 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:28.33755 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:28.33800 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:23:28.33841 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:23:28.33895 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:23:28.33935 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:23:28.33985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:23:28.34033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:23:28.34079 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:23:28.34125 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:23:28.34216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:23:28.34283 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:23:28.34362 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:23:28.34402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:23:28.34436 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:23:28.34487 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:23:43.30007 2020-06-27 13:23:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:23:43.30151 :
2020-06-27_13:23:43.30259 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:23:43.30479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:23:43.30532 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:23:43.30602 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:23:43.30647 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:23:43.30696 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:23:43.30763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:23:43.30802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:23:43.30862 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:23:43.30936 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:23:43.30991 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:23:43.31039 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:23:43.31089 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:23:43.31129 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:23:43.31179 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:23:43.31231 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:23:43.31299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:23:43.31351 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:23:43.31403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:23:43.31484 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:23:43.31526 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:23:43.31593 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:23:43.31914 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:23:43.32035 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:23:43.32130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:23:43.32197 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:23:43.32297 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:23:43.32414 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:23:43.32454 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:23:43.32533 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:23:43.32580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:23:43.32650 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:43.32691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:43.32744 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:43.32813 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:23:43.32845 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:23:43.32928 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:43.32984 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:43.33029 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:43.33085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:23:43.33145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:23:43.33196 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:23:43.33242 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:23:43.33295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:23:43.33344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:23:43.33393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:43.33441 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:43.33483 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:23:43.33530 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:23:43.33587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:23:43.33635 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:23:43.33691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:23:43.33747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:23:43.33793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:23:43.33844 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:23:43.33882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:23:43.33927 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:23:43.33969 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:23:43.34007 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:23:43.34045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:23:43.34086 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:23:58.27982 2020-06-27 13:23:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:23:58.28044 :
2020-06-27_13:23:58.28108 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:23:58.28191 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:23:58.28266 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:23:58.28419 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:23:58.28650 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:23:58.28709 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:23:58.28751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:23:58.28812 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:23:58.28892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:23:58.28963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:23:58.29025 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:23:58.29079 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:23:58.29140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:23:58.29197 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:23:58.29245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:23:58.29301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:23:58.29358 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:23:58.29434 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:23:58.29503 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:23:58.29582 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:23:58.29661 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:23:58.29723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:23:58.29785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:23:58.29856 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:23:58.29942 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:23:58.30013 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:23:58.30074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:23:58.30139 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:23:58.30188 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:23:58.30252 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:23:58.30421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:23:58.30478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:58.30536 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:58.30593 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:58.30678 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:23:58.30746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:23:58.30820 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:23:58.30898 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:23:58.30975 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:23:58.31048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:23:58.31121 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:23:58.31200 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:23:58.31823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:23:58.32044 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:23:58.32210 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:23:58.32301 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:58.32373 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:23:58.32437 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:23:58.32502 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:23:58.32564 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:23:58.32624 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:23:58.32681 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:23:58.32740 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:23:58.32808 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:23:58.32869 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:23:58.32929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:23:58.32985 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:23:58.33042 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:23:58.33100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:23:58.33162 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:23:58.33345 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:24:13.20862 2020-06-27 13:24:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:24:13.20932 :
2020-06-27_13:24:13.20996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:24:13.21058 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:24:13.21100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:24:13.21153 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:24:13.21194 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:24:13.21245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:24:13.21299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:24:13.21356 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:24:13.21406 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:24:13.21453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:24:13.21513 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:24:13.21568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:24:13.21624 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:24:13.21682 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:24:13.21924 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:24:13.21972 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:24:13.22018 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:24:13.22056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:24:13.22112 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:24:13.22156 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:24:13.22221 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:24:13.22266 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:24:13.22320 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:24:13.22365 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:24:13.22411 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:24:13.22464 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:24:13.22508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:24:13.22560 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:24:13.22631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:24:13.22689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:24:13.22750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:24:13.22805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:13.22853 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:13.22903 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:13.22968 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:24:13.23027 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:24:13.23091 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:13.23142 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:13.23199 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:13.23251 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:24:13.23306 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:24:13.23351 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:24:13.23396 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:24:13.23450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:24:13.23492 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:24:13.23544 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:13.23596 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:13.23662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:24:13.23750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:24:13.23796 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:24:13.23842 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:24:13.23891 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:24:13.23940 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:24:13.23984 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:24:13.24029 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:24:13.24077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:24:13.24138 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:24:13.24239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:24:13.24323 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:24:13.24375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:24:13.24453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:24:28.20960 2020-06-27 13:24:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:24:28.21118 :
2020-06-27_13:24:28.21170 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:24:28.21214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:24:28.21383 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:24:28.21458 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:24:28.21508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:24:28.21550 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:24:28.21599 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:24:28.21648 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:24:28.21711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:24:28.21773 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:24:28.21823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:24:28.21862 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:24:28.21906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:24:28.21944 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:24:28.21986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:24:28.22015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:24:28.22058 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:24:28.22093 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:24:28.22134 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:24:28.22182 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:24:28.22214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:24:28.22245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:24:28.22281 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:24:28.22308 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:24:28.22340 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:24:28.22370 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:24:28.22402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:24:28.22450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:24:28.22479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:24:28.22512 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:24:28.22557 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:24:28.22603 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:28.22654 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:28.22691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:28.22741 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:24:28.22770 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:24:28.22797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:28.22823 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:28.22866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:28.22895 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:24:28.22922 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:24:28.22952 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:24:28.22980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:24:28.23021 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:24:28.23058 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:24:28.23101 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:28.23140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:28.23171 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:24:28.23202 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:24:28.23239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:24:28.23266 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:24:28.23299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:24:28.23331 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:24:28.23404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:24:28.23450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:24:28.23481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:24:28.23520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:24:28.23559 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:24:28.23592 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:24:28.23626 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:24:28.23665 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:24:43.17417 2020-06-27 13:24:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:24:43.18336 :
2020-06-27_13:24:43.18372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:24:43.18419 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:24:43.18470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:24:43.18527 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:24:43.18574 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:24:43.18613 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:24:43.18663 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:24:43.18765 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:24:43.18830 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:24:43.18884 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:24:43.18949 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:24:43.19000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:24:43.19050 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:24:43.19088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:24:43.19127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:24:43.19166 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:24:43.19203 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:24:43.19239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:24:43.19278 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:24:43.19317 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:24:43.19362 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:24:43.19403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:24:43.19442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:24:43.19481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:24:43.19524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:24:43.19561 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:24:43.19591 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:24:43.19622 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:24:43.19653 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:24:43.19703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:24:43.19735 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:24:43.19768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:43.19798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:43.19828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:43.19859 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:24:43.19888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:24:43.19921 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:43.19949 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:43.19979 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:43.20009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:24:43.20056 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:24:43.20090 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:24:43.20129 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:24:43.20170 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:24:43.20233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:24:43.20279 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:43.20318 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:43.20357 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:24:43.20394 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:24:43.20431 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:24:43.20464 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:24:43.20503 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:24:43.20548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:24:43.20584 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:24:43.20631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:24:43.20668 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:24:43.20716 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:24:43.20748 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:24:43.20783 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:24:43.20815 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:24:43.20845 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:24:58.26505 2020-06-27 13:24:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:24:58.26558 :
2020-06-27_13:24:58.26598 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:24:58.26647 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:24:58.26691 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:24:58.26730 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:24:58.26769 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:24:58.26829 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:24:58.26877 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:24:58.26940 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:24:58.27009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:24:58.27062 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:24:58.27120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:24:58.27155 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:24:58.27217 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:24:58.27254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:24:58.27291 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:24:58.27321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:24:58.27364 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:24:58.27392 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:24:58.27431 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:24:58.27469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:24:58.27496 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:24:58.27529 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:24:58.27581 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:24:58.27627 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:24:58.27665 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:24:58.27707 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:24:58.27752 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:24:58.27802 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:24:58.27847 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:24:58.27906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:24:58.27953 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:24:58.28000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:58.28038 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:58.28080 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:58.28117 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:24:58.28168 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:24:58.28202 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:24:58.28236 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:24:58.28262 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:24:58.28300 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:24:58.28337 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:24:58.28367 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:24:58.28408 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:24:58.28456 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:24:58.28500 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:24:58.28552 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:58.28587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:24:58.28631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:24:58.28685 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:24:58.28733 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:24:58.28778 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:24:58.28820 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:24:58.28853 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:24:58.28899 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:24:58.28930 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:24:58.28968 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:24:58.29000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:24:58.29030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:24:58.29063 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:24:58.29089 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:24:58.29123 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:25:13.35635 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:25:13.35757 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:25:28.45678 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:25:28.45821 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:25:43.34888 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:25:43.34978 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:26:13.26289 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:26:13.26381 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:26:28.27859 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:28.28940 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:28.30093 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:28.31227 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:28.32907 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:26:28.33040 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:26:43.21995 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:26:43.22085 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:26:58.32144 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.33354 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.34508 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.35744 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.36840 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.37987 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.39155 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.40372 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.41526 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.42690 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.43891 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.45043 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.46196 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.47343 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.49984 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.50879 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.52026 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.53199 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.54346 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.58278 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.59442 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.60572 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.61723 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.62873 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.65465 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.66702 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.67955 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.69124 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.70303 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.71508 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.72687 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.73898 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.75050 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.76255 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:26:58.77402 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:27:13.25930 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:27:13.26033 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:27:43.32725 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:27:43.32838 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:28:28.35250 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:28:28.35653 2020-06-27 13:28:28 - PG::InsufficientResources - ERROR:  could not read block 9 in file "base/16385/2610": Too many open files
2020-06-27_13:28:28.36049 :
2020-06-27_13:28:28.36107 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:28:28.36154 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:28:28.36215 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:28:28.36291 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:28:28.36344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:28:28.36403 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:28:28.36472 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:28:28.36549 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:28:28.36598 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:28:28.36653 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:28:28.36713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:28:28.36777 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:28:28.36821 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:28:28.36903 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:28:28.36980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:28:28.37043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:28:28.37113 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:28:28.37171 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:28:28.37237 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:28:28.37294 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:28:28.37355 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:28:28.37426 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:28:28.37535 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:28:28.37605 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:28:28.37655 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:28:28.37720 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:28:28.37781 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:28:28.37838 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:28:28.37880 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:28:28.37924 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:28:28.38020 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:28:28.38099 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:28:28.38189 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:28:28.38276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:28:28.38347 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:28:28.38402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:28:28.38458 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:28:28.38521 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:28:28.38571 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:28:28.38609 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:28:28.38695 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:28:28.38744 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:28:28.38806 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:28:28.38858 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:28:28.38933 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:28:28.38994 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:28:28.39040 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:28:28.39094 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:28:28.39148 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:28:28.39204 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:28:28.39262 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:28:28.39321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:28:28.39399 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:28:28.39470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:28:28.39539 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:28:28.39614 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:28:28.39670 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:28:28.39732 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:28:28.39782 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:28:28.39844 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:28:28.39906 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:28:43.19084 2020-06-27 13:28:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:28:43.19145 :
2020-06-27_13:28:43.19198 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:28:43.19245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:28:43.19285 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:28:43.19324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:28:43.19367 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:28:43.19413 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:28:43.19466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:28:43.19514 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:28:43.19564 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:28:43.19612 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:28:43.19662 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:28:43.19710 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:28:43.19750 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:28:43.19791 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:28:43.19831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:28:43.19885 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:28:43.19929 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:28:43.19980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:28:43.20023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:28:43.20065 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:28:43.20125 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:28:43.20173 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:28:43.20216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:28:43.20264 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:28:43.20308 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:28:43.20354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:28:43.20402 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:28:43.20456 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:28:43.20508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:28:43.20568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:28:43.20613 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:28:43.20650 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:28:43.20698 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:28:43.20748 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:28:43.20793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:28:43.20848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:28:43.20894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:28:43.20943 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:28:43.20986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:28:43.21026 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:28:43.21077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:28:43.21116 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:28:43.21170 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:28:43.21212 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:28:43.21254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:28:43.21298 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:28:43.21344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:28:43.21393 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:28:43.21435 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:28:43.21481 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:28:43.21528 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:28:43.21573 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:28:43.21619 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:28:43.21657 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:28:43.21708 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:28:43.21754 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:28:43.21797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:28:43.21840 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:28:43.21882 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:28:43.21927 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:28:43.21970 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:28:58.30376 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:28:58.30469 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:29:13.19554 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:29:13.19649 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:29:43.49392 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:29:43.49624 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:29:58.34769 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:29:58.34881 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:30:28.32191 2020-06-27 13:30:28 - PG::InsufficientResources - ERROR:  could not read block 1 in file "base/16385/1259": Too many open files
2020-06-27_13:30:28.32244 :
2020-06-27_13:30:28.32308 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:30:28.32354 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:30:28.32407 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:30:28.32466 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:30:28.32554 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:30:28.32592 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:30:28.32628 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:30:28.32679 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:30:28.32731 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:30:28.32791 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:30:28.32854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:30:28.32908 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:30:28.32950 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:30:28.33000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:30:28.33036 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:30:28.33073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:30:28.33126 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:30:28.33169 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:30:28.33207 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:30:28.33248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:30:28.33279 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:30:28.33318 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:30:28.33365 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:30:28.33407 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:30:28.33445 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:30:28.33508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:30:28.33546 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:30:28.33587 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:30:28.33636 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:30:28.33675 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:30:28.33713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:30:28.33768 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:30:28.33811 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:30:28.33838 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:30:28.33880 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:30:28.33933 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:30:28.33978 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:30:28.34012 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:30:28.34043 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:30:28.34106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:30:28.34149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:30:28.34206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:30:28.34244 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:30:28.34280 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:30:28.34326 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:30:28.34378 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:30:28.34440 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:30:28.34480 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:30:28.34543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:30:28.34594 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:30:28.34642 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:30:28.34674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:30:28.34705 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:30:28.34745 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:30:28.34795 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:30:28.34825 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:30:28.34866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:30:28.34910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:30:28.35280 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:30:28.35336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:30:28.35378 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:30:43.14772 2020-06-27 13:30:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:30:43.15163 :
2020-06-27_13:30:43.15206 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:30:43.15243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:30:43.15280 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:30:43.15336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:30:43.15377 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:30:43.15414 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:30:43.15469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:30:43.15498 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:30:43.15541 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:30:43.15571 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:30:43.15600 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:30:43.15631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:30:43.15669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:30:43.15710 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:30:43.15745 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:30:43.15786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:30:43.15831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:30:43.15864 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:30:43.15908 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:30:43.15950 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:30:43.15991 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:30:43.16024 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:30:43.16066 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:30:43.16106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:30:43.16146 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:30:43.16188 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:30:43.16233 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:30:43.16276 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:30:43.16313 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:30:43.16348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:30:43.16384 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:30:43.16414 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:30:43.16454 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:30:43.16509 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:30:43.16549 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:30:43.16589 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:30:43.16635 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:30:43.16677 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:30:43.16713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:30:43.16747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:30:43.16783 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:30:43.16815 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:30:43.16848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:30:43.16881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:30:43.16915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:30:43.16948 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:30:43.16997 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:30:43.17036 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:30:43.17076 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:30:43.17115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:30:43.17150 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:30:43.17178 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:30:43.17216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:30:43.17249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:30:43.17279 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:30:43.17310 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:30:43.17345 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:30:43.17383 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:30:43.17415 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:30:43.17446 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:30:43.17479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:30:58.25654 2020-06-27 13:30:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:30:58.26869 :
2020-06-27_13:30:58.27227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:30:58.27791 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:30:58.27841 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:30:58.27940 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:30:58.27981 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:30:58.28028 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:30:58.28072 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:30:58.28136 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:30:58.28184 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:30:58.28224 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:30:58.28280 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:30:58.28324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:30:58.28375 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:30:58.28420 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:30:58.28478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:30:58.28551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:30:58.28594 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:30:58.28632 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:30:58.28680 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:30:58.29045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:30:58.29423 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:30:58.29547 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:30:58.29730 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:30:58.29822 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:30:58.29896 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:30:58.29959 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:30:58.30017 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:30:58.30074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:30:58.30137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:30:58.30188 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:30:58.30253 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:30:58.30293 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:30:58.30333 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:30:58.30372 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:30:58.30442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:30:58.30479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:30:58.30529 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:30:58.30572 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:30:58.30603 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:30:58.30638 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:30:58.30686 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:30:58.30717 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:30:58.30771 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:30:58.30816 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:30:58.30887 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:30:58.30925 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:30:58.30976 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:30:58.31023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:30:58.31074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:30:58.31120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:30:58.31167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:30:58.31208 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:30:58.31241 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:30:58.31279 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:30:58.31310 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:30:58.31341 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:30:58.31388 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:30:58.31438 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:30:58.31486 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:30:58.31530 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:30:58.31583 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:31:13.20433 2020-06-27 13:31:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:31:13.20485 :
2020-06-27_13:31:13.20527 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:31:13.20562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:31:13.20601 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:31:13.20632 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:31:13.20671 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:31:13.20715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:31:13.20763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:31:13.20793 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:31:13.20829 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:31:13.20867 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:31:13.20926 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:31:13.20961 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:31:13.21004 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:31:13.21038 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:31:13.21073 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:31:13.21106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:31:13.21137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:31:13.21166 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:31:13.21193 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:31:13.21230 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:31:13.21268 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:31:13.21303 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:31:13.21336 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:31:13.21371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:31:13.21404 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:31:13.21439 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:31:13.21469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:31:13.21506 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:31:13.21538 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:31:13.21578 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:31:13.21611 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:31:13.21637 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:31:13.21672 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:31:13.21705 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:31:13.21752 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:31:13.21785 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:31:13.21818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:31:13.21852 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:31:13.21885 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:31:13.21915 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:31:13.21952 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:31:13.21986 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:31:13.22019 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:31:13.22055 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:31:13.22088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:31:13.22118 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:31:13.22158 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:31:13.22191 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:31:13.22225 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:31:13.22264 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:31:13.22307 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:31:13.22344 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:31:13.22397 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:31:13.22433 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:31:13.22470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:31:13.22506 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:31:13.22548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:31:13.22585 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:31:13.22621 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:31:13.22658 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:31:13.22692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:31:28.13581 2020-06-27 13:31:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:31:28.13612 :
2020-06-27_13:31:28.13649 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:31:28.13679 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:31:28.13712 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:31:28.13744 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:31:28.13778 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:31:28.13812 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:31:28.13850 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:31:28.13878 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:31:28.13910 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:31:28.13940 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:31:28.13971 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:31:28.14009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:31:28.14039 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:31:28.14069 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:31:28.14100 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:31:28.14130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:31:28.14165 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:31:28.14216 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:31:28.14254 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:31:28.14289 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:31:28.14324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:31:28.14353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:31:28.14381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:31:28.14410 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:31:28.14448 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:31:28.14478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:31:28.14505 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:31:28.14545 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:31:28.14575 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:31:28.14606 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:31:28.14638 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:31:28.14666 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:31:28.14694 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:31:28.14722 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:31:28.14755 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:31:28.14788 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:31:28.14816 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:31:28.14848 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:31:28.14875 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:31:28.14904 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:31:28.14935 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:31:28.14965 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:31:28.14996 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:31:28.15030 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:31:28.15064 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:31:28.15091 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:31:28.15120 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:31:28.15149 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:31:28.15180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:31:28.15221 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:31:28.15257 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:31:28.15294 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:31:28.15324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:31:28.15356 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:31:28.15386 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:31:28.15418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:31:28.15461 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:31:28.15489 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:31:28.15517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:31:28.15551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:31:28.15579 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:31:43.25478 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:31:43.27032 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:31:43.27144 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:31:58.33622 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:31:58.33723 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:32:13.28772 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:32:13.28890 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:32:43.25853 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:32:43.25981 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:33:28.28097 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:33:28.28201 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:33:43.28278 2020-06-27 13:33:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/3455": Too many open files
2020-06-27_13:33:43.28376 :
2020-06-27_13:33:43.28422 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:33:43.28486 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:33:43.28542 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:33:43.28604 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:33:43.28673 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:33:43.28733 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:33:43.28810 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:33:43.28881 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:33:43.28966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:33:43.29031 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:33:43.29101 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:33:43.29179 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:33:43.29249 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:33:43.29302 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:33:43.29365 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:33:43.29423 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:33:43.29478 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:33:43.29526 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:33:43.29620 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:33:43.29664 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:33:43.29726 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:33:43.29762 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:33:43.29814 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:33:43.29860 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:33:43.29900 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:33:43.29959 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:33:43.30009 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:33:43.30069 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:33:43.30114 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:33:43.30160 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:33:43.30208 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:33:43.30246 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:33:43.30295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:33:43.30348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:33:43.30401 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:33:43.30442 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:33:43.30482 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:33:43.30552 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:33:43.30628 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:33:43.30675 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:33:43.30723 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:33:43.30765 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:33:43.30827 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:33:43.30866 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:33:43.30908 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:33:43.30968 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:33:43.31013 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:33:43.31060 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:33:43.31122 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:33:43.31190 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:33:43.31262 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:33:43.31321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:33:43.31381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:33:43.31570 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:33:43.31715 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:33:43.31772 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:33:43.32177 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:33:43.32268 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:33:43.32311 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:33:43.32358 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:33:43.32399 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:33:58.24377 2020-06-27 13:33:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:33:58.24439 :
2020-06-27_13:33:58.24508 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:33:58.24579 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:33:58.24625 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:33:58.24670 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:33:58.24718 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:33:58.24761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:33:58.24812 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:33:58.24870 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:33:58.24941 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:33:58.24989 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:33:58.25045 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:33:58.25126 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:33:58.25172 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:33:58.25221 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:33:58.25275 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:33:58.25347 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:33:58.25396 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:33:58.25455 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:33:58.25503 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:33:58.25570 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:33:58.25621 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:33:58.25680 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:33:58.25728 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:33:58.25786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:33:58.25829 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:33:58.25876 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:33:58.25928 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:33:58.26000 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:33:58.26060 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:33:58.26123 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:33:58.26181 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:33:58.26239 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:33:58.26287 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:33:58.26340 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:33:58.26386 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:33:58.26424 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:33:58.26473 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:33:58.26517 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:33:58.26568 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:33:58.26608 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:33:58.26673 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:33:58.26716 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:33:58.26758 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:33:58.26809 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:33:58.26857 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:33:58.26900 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:33:58.26941 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:33:58.26983 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:33:58.27031 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:33:58.27084 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:33:58.27144 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:33:58.27227 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:33:58.27299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:33:58.27360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:33:58.27418 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:33:58.27470 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:33:58.27524 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:33:58.27577 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:33:58.27620 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:33:58.27669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:33:58.27722 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:34:13.22095 2020-06-27 13:34:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:34:13.22140 :
2020-06-27_13:34:13.22193 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:34:13.22250 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:34:13.22306 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:34:13.22353 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:34:13.22396 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:34:13.22453 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:34:13.22499 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:34:13.22554 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:34:13.22605 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:34:13.22653 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:34:13.22702 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:34:13.22755 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:34:13.22805 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:34:13.22846 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:34:13.22888 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:34:13.22928 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:34:13.22977 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:34:13.23016 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:34:13.23055 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:34:13.23096 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:34:13.23137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:34:13.23172 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:34:13.23224 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:34:13.23265 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:34:13.23312 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:34:13.23381 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:34:13.23421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:34:13.23469 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:34:13.23511 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:34:13.23553 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:34:13.23588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:34:13.23631 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:13.23676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:13.23713 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:13.23761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:34:13.23808 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:34:13.23857 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:13.23894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:13.23941 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:13.23980 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:34:13.24039 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:34:13.24085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:34:13.24135 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:34:13.24192 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:34:13.24258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:34:13.24323 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:13.24369 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:13.24421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:34:13.24457 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:34:13.24595 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:34:13.24646 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:34:13.24687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:34:13.24743 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:34:13.24789 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:34:13.24841 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:34:13.24877 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:34:13.24918 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:34:13.24963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:34:13.24998 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:34:13.25033 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:34:13.25077 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:34:28.18287 2020-06-27 13:34:28 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:34:28.18354 :
2020-06-27_13:34:28.18398 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:34:28.18439 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:34:28.18479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:34:28.18519 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:34:28.18558 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:34:28.18597 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:34:28.18641 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:34:28.18674 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:34:28.18712 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:34:28.18751 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:34:28.18787 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:34:28.18828 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:34:28.18859 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:34:28.18887 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:34:28.18918 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:34:28.18946 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:34:28.18989 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:34:28.19027 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:34:28.19068 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:34:28.19109 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:34:28.19242 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:34:28.19279 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:34:28.19321 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:34:28.19360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:34:28.19395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:34:28.19447 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:34:28.19479 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:34:28.19509 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:34:28.19555 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:34:28.19592 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:34:28.19637 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:34:28.19675 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:28.19718 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:28.19763 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:28.19803 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:34:28.19834 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:34:28.19864 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:28.19895 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:28.19935 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:28.19963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:34:28.19990 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:34:28.20016 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:34:28.20048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:34:28.20081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:34:28.20115 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:34:28.20152 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:28.20186 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:28.20214 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:34:28.20245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:34:28.20275 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:34:28.20299 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:34:28.20331 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:34:28.20364 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:34:28.20397 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:34:28.20436 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:34:28.20467 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:34:28.20493 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:34:28.20548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:34:28.20586 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:34:28.20617 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:34:28.20651 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:34:43.25551 2020-06-27 13:34:43 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:34:43.25611 :
2020-06-27_13:34:43.25661 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:34:43.25711 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:34:43.25754 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:34:43.25892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:34:43.25975 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:34:43.26034 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:34:43.26088 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:34:43.26147 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:34:43.26207 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:34:43.26258 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:34:43.26309 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:34:43.26360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:34:43.26416 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:34:43.26459 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:34:43.26515 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:34:43.26560 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:34:43.26603 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:34:43.26646 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:34:43.26689 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:34:43.26731 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:34:43.26770 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:34:43.26813 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:34:43.26847 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:34:43.26894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:34:43.26931 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:34:43.26970 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:34:43.27015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:34:43.27062 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:34:43.27106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:34:43.27148 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:34:43.27183 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:34:43.27232 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:43.27277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:43.27319 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:43.27356 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:34:43.27410 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:34:43.27450 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:43.27501 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:43.27551 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:43.27611 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:34:43.27658 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:34:43.27712 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:34:43.27764 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:34:43.27813 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:34:43.27863 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:34:43.27912 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:43.27955 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:43.28014 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:34:43.28067 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:34:43.28117 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:34:43.28167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:34:43.28236 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:34:43.28272 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:34:43.28318 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:34:43.28357 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:34:43.28392 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:34:43.28431 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:34:43.28463 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:34:43.28497 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:34:43.28539 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:34:43.28576 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:34:58.21877 2020-06-27 13:34:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:34:58.23311 :
2020-06-27_13:34:58.23366 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:34:58.23415 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:34:58.23460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:34:58.23534 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:34:58.23586 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:34:58.23640 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:34:58.23690 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:34:58.23749 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:34:58.23808 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:34:58.23854 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:34:58.23894 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:34:58.23935 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:34:58.23975 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:34:58.24012 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:34:58.24048 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:34:58.24081 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:34:58.24130 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:34:58.24175 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:34:58.24222 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:34:58.24280 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:34:58.24322 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:34:58.24363 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:34:58.24408 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:34:58.24452 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:34:58.24518 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:34:58.24714 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:34:58.24826 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:34:58.24892 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:34:58.24984 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:34:58.25085 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:34:58.25201 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:34:58.25277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:58.25371 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:58.25445 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:58.25504 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:34:58.25548 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:34:58.25594 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:34:58.25656 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:34:58.25703 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:34:58.25747 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:34:58.25786 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:34:58.25833 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:34:58.25880 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:34:58.25919 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:34:58.25966 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:34:58.26015 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:58.26074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:34:58.26121 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:34:58.26162 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:34:58.26198 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:34:58.26236 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:34:58.26277 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:34:58.26324 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:34:58.26360 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:34:58.26395 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:34:58.26445 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:34:58.26490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:34:58.26540 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:34:58.26588 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:34:58.26636 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:34:58.26692 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:35:13.22176 2020-06-27 13:35:13 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/1259": Too many open files
2020-06-27_13:35:13.22254 :
2020-06-27_13:35:13.22314 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:35:13.22428 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:35:13.22503 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:35:13.22562 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:35:13.22646 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:35:13.22700 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:35:13.22746 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:35:13.22798 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:35:13.22856 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:35:13.22913 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:35:13.22963 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:35:13.23017 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:35:13.23061 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:35:13.23106 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:35:13.23145 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:35:13.23184 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:35:13.23225 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:35:13.23263 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:35:13.23309 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:35:13.23358 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:35:13.23397 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:35:13.23447 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:35:13.23490 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:35:13.23543 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:35:13.23603 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:35:13.23639 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:35:13.23686 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:35:13.23722 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:35:13.23760 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:35:13.23797 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:35:13.23831 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:35:13.23868 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:35:13.23920 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:35:13.23956 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:35:13.23998 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:35:13.24035 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:35:13.24070 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:35:13.24105 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:35:13.24140 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:35:13.24180 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:35:13.24213 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:35:13.24248 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:35:13.24288 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:35:13.24332 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:35:13.24378 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:35:13.24421 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:35:13.24487 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:35:13.24538 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:35:13.24578 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:35:13.24619 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:35:13.24687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:35:13.24779 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:35:13.24824 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:35:13.24868 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:35:13.24926 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:35:13.24962 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:35:13.25001 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:35:13.25041 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:35:13.25084 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:35:13.25124 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:35:13.25167 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:35:28.28980 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:35:28.29105 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:35:58.36890 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:35:58.37013 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:36:13.32911 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:36:13.33057 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:36:43.43431 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:36:43.45111 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:36:43.45272 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:36:58.57158 2020-06-27 13:36:58 - PG::InsufficientResources - ERROR:  could not seek to end of file "base/16385/2685": Too many open files
2020-06-27_13:36:58.57239 :
2020-06-27_13:36:58.57295 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `exec'
2020-06-27_13:36:58.57384 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:19:in `block in run'
2020-06-27_13:36:58.57438 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:34:in `block in with_connection_pool'
2020-06-27_13:36:58.57485 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:63:in `block (2 levels) in with'
2020-06-27_13:36:58.57565 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `handle_interrupt'
2020-06-27_13:36:58.57629 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:62:in `block in with'
2020-06-27_13:36:58.57687 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `handle_interrupt'
2020-06-27_13:36:58.57761 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/connection_pool-2.2.3/lib/connection_pool.rb:59:in `with'
2020-06-27_13:36:58.57873 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/base.rb:32:in `with_connection_pool'
2020-06-27_13:36:58.57969 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:18:in `run'
2020-06-27_13:36:58.58144 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/database/tuple_stats.rb:34:in `probe_db'
2020-06-27_13:36:58.58243 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:17:in `block (3 levels) in probe_all'
2020-06-27_13:36:58.58311 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `each'
2020-06-27_13:36:58.58391 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:16:in `block (2 levels) in probe_all'
2020-06-27_13:36:58.58460 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `each'
2020-06-27_13:36:58.58569 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:14:in `block in probe_all'
2020-06-27_13:36:58.58647 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `each'
2020-06-27_13:36:58.58736 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/prober.rb:13:in `probe_all'
2020-06-27_13:36:58.58818 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:67:in `block (2 levels) in setup_probes'
2020-06-27_13:36:58.58877 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `call'
2020-06-27_13:36:58.58954 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1636:in `block in compile!'
2020-06-27_13:36:58.59023 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (3 levels) in route!'
2020-06-27_13:36:58.59074 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1006:in `route_eval'
2020-06-27_13:36:58.59127 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:987:in `block (2 levels) in route!'
2020-06-27_13:36:58.59185 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1035:in `block in process_route'
2020-06-27_13:36:58.59221 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `catch'
2020-06-27_13:36:58.59282 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1033:in `process_route'
2020-06-27_13:36:58.59342 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:985:in `block in route!'
2020-06-27_13:36:58.59463 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `each'
2020-06-27_13:36:58.59520 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:984:in `route!'
2020-06-27_13:36:58.59621 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1098:in `block in dispatch!'
2020-06-27_13:36:58.59669 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:36:58.59731 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:36:58.59800 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:36:58.59871 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1095:in `dispatch!'
2020-06-27_13:36:58.59940 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `block in call!'
2020-06-27_13:36:58.59989 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `block in invoke'
2020-06-27_13:36:58.60041 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `catch'
2020-06-27_13:36:58.60080 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1072:in `invoke'
2020-06-27_13:36:58.60137 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:919:in `call!'
2020-06-27_13:36:58.60190 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:908:in `call'
2020-06-27_13:36:58.60245 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-exporter-7.0.5/lib/gitlab_exporter/web_exporter.rb:21:in `call'
2020-06-27_13:36:58.60292 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/xss_header.rb:18:in `call'
2020-06-27_13:36:58.60348 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/path_traversal.rb:16:in `call'
2020-06-27_13:36:58.60464 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/json_csrf.rb:26:in `call'
2020-06-27_13:36:58.60525 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:36:58.60651 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/base.rb:50:in `call'
2020-06-27_13:36:58.60745 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-protection-2.0.8.1/lib/rack/protection/frame_options.rb:31:in `call'
2020-06-27_13:36:58.60857 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/null_logger.rb:11:in `call'
2020-06-27_13:36:58.61049 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb:12:in `call'
2020-06-27_13:36:58.61121 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/show_exceptions.rb:22:in `call'
2020-06-27_13:36:58.61202 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:194:in `call'
2020-06-27_13:36:58.61389 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1951:in `call'
2020-06-27_13:36:58.61458 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `block in call'
2020-06-27_13:36:58.61580 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1730:in `synchronize'
2020-06-27_13:36:58.61779 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/sinatra-2.0.8.1/lib/sinatra/base.rb:1503:in `call'
2020-06-27_13:36:58.61988 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/configuration.rb:228:in `call'
2020-06-27_13:36:58.62197 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:691:in `handle_request'
2020-06-27_13:36:58.62676 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:481:in `process_client'
2020-06-27_13:36:58.62796 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/server.rb:335:in `block in run'
2020-06-27_13:36:58.62942 	/opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.3.gitlab.2/lib/puma/thread_pool.rb:138:in `block in spawn_thread'
2020-06-27_13:37:13.54619 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:37:13.54761 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:38:13.39772 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:38:13.39911 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:39:13.45738 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:39:13.47015 WARNING:  could not open statistics file "pg_stat_tmp/global.stat": Too many open files
2020-06-27_13:39:13.48759 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:39:13.48886 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:39:28.34788 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:39:28.34900 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:39:43.46197 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:39:43.46378 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:40:13.55542 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:40:13.55675 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:40:28.42757 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:40:28.42910 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:42:28.52260 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:42:28.52639 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:42:43.52813 WARNING:  could not open statistics file "pg_stat_tmp/db_16385.stat": Too many open files
2020-06-27_13:42:43.53115 WARNING:  could not open statistics file "pg_stat_tmp/db_0.stat": Too many open files
2020-06-27_13:43:20.41268 - Gracefully stopping, waiting for requests to finish
2020-06-27_13:43:20.41376 === puma shutdown: 2020-06-27 13:43:20 +0000 ===
2020-06-27_13:43:20.41425 - Goodbye!
2020-06-27_13:43:20.41478 == Sinatra has ended his set (crowd applauds)
